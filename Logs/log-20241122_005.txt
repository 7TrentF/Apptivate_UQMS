2024-11-22 18:06:18.276 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 18:06:18.412 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 18:06:18.414 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 18:06:18.416 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 18:06:18.417 +02:00 [INF] Hosting environment: Development
2024-11-22 18:06:18.418 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 18:06:18.761 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 18:06:19.399 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:06:19.413 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:06:19.425 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:06:19.427 +02:00 [ERR] User not logged in.
2024-11-22 18:06:19.445 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 18:06:19.451 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 32.3715ms
2024-11-22 18:06:19.458 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:06:19.464 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 302 0 null 704.6106ms
2024-11-22 18:06:19.473 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 18:06:19.491 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:06:19.497 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 18:06:21.200 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 18:06:21.905 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 18:06:21.986 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:06:21.989 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 18:06:21.993 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 18:06:21.995 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 2495.969ms
2024-11-22 18:06:21.996 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:06:21.999 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:61db9b96-e929-58ae-0bde-e71dd3f4e9a4
2024-11-22 18:06:22.005 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 2531.9763ms
2024-11-22 18:06:22.007 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 18:06:22.013 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:06:22.016 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:06:22.018 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 18:06:22.020 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 2.5352ms
2024-11-22 18:06:22.021 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:06:22.022 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 14.9774ms
2024-11-22 18:06:22.027 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 18:06:22.032 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:06:22.033 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:06:22.121 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:06:22.213 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 18:06:22.309 +02:00 [INF] Executed DbCommand (57ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:06:22.545 +02:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 18:06:22.590 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:06:22.602 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:06:22.617 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:06:22.630 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 18:06:22.783 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 159.3417ms.
2024-11-22 18:06:22.788 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 753.6586ms
2024-11-22 18:06:22.790 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:06:22.793 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 766.5497ms
2024-11-22 18:06:22.823 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:06:22.826 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:06:22.837 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 14.3476ms
2024-11-22 18:06:22.868 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 42.1643ms
2024-11-22 18:06:22.999 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 18:06:23.013 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 18:06:23.034 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 18:06:23.038 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 39.1404ms
2024-11-22 18:06:23.139 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=91Z5tUXQwUFLYlVprMmMBA - null null
2024-11-22 18:06:23.172 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 18:06:23.251 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: 9JBpkJpqB5W7yJdiwkVK4w
2024-11-22 18:06:23.256 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: 9JBpkJpqB5W7yJdiwkVK4w
2024-11-22 18:07:30.951 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 18:07:31.113 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 18:07:31.114 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 18:07:31.118 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 18:07:31.119 +02:00 [INF] Hosting environment: Development
2024-11-22 18:07:31.120 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 18:07:31.202 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 18:07:31.649 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 18:07:31.835 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 18:07:31.844 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:07:31.866 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 18:07:31.875 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:07:31.880 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 679.3862ms
2024-11-22 18:07:31.883 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=391zRfzt3TFS0rxStC9lHw - null null
2024-11-22 18:07:31.897 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 18:07:31.900 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:07:31.907 +02:00 [ERR] User not logged in.
2024-11-22 18:07:31.933 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 18:07:31.939 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: 6n2jvE7UMs9Fa3lkaxdrWA
2024-11-22 18:07:31.941 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: 6n2jvE7UMs9Fa3lkaxdrWA
2024-11-22 18:07:31.942 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 58.8654ms
2024-11-22 18:07:31.944 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:07:31.946 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 302 0 null 297.0656ms
2024-11-22 18:07:31.956 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 18:07:31.963 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:07:31.972 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 18:07:33.611 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 18:07:34.246 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 18:07:34.338 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:07:34.341 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 18:07:34.346 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 18:07:34.348 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 2374.3433ms
2024-11-22 18:07:34.352 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:07:34.357 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:b585e3d7-b0d4-52b2-bdde-d0e968e0bb0e
2024-11-22 18:07:34.367 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 2410.9383ms
2024-11-22 18:07:34.370 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 18:07:34.380 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:07:34.383 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:07:34.387 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 18:07:34.389 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 3.3265ms
2024-11-22 18:07:34.391 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:07:34.392 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 22.2329ms
2024-11-22 18:07:34.397 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 18:07:34.404 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:07:34.406 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:07:34.543 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:07:34.683 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 18:07:34.801 +02:00 [INF] Executed DbCommand (67ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:07:35.051 +02:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 18:07:35.083 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:07:35.096 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:07:35.111 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:07:35.122 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 18:07:35.227 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 110.5638ms.
2024-11-22 18:07:35.230 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 823.0304ms
2024-11-22 18:07:35.232 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:07:35.237 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 840.2317ms
2024-11-22 18:07:35.250 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: 6n2jvE7UMs9Fa3lkaxdrWA
2024-11-22 18:07:35.252 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: 6n2jvE7UMs9Fa3lkaxdrWA
2024-11-22 18:07:35.258 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 18:07:35.259 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=391zRfzt3TFS0rxStC9lHw - 200 null null 3375.7692ms
2024-11-22 18:07:35.288 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:07:35.292 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:07:35.295 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 6.8636ms
2024-11-22 18:07:35.332 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 40.0534ms
2024-11-22 18:07:35.358 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 18:07:35.368 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 18:07:35.370 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 18:07:35.371 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 13.1727ms
2024-11-22 18:07:35.496 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=VMtnYLyUf14YY4RhPMQKRQ - null null
2024-11-22 18:07:35.507 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 18:07:35.630 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: TB0H7zeFVohDzsuCX9RiMQ
2024-11-22 18:07:35.631 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: TB0H7zeFVohDzsuCX9RiMQ
2024-11-22 18:07:37.584 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 18:07:37.741 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:07:37.762 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:07:37.819 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:07:37.825 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:07:37.830 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 18:07:37.910 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 82.4694ms.
2024-11-22 18:07:37.938 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: TB0H7zeFVohDzsuCX9RiMQ
2024-11-22 18:07:37.976 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 209.5636ms
2024-11-22 18:07:37.977 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: TB0H7zeFVohDzsuCX9RiMQ
2024-11-22 18:07:37.984 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:07:37.987 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:07:37.999 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:07:38.001 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 18:07:38.016 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 32.0598ms
2024-11-22 18:07:38.059 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 72.3661ms
2024-11-22 18:07:38.067 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=VMtnYLyUf14YY4RhPMQKRQ - 200 null null 2570.4959ms
2024-11-22 18:07:38.075 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 491.5951ms
2024-11-22 18:07:38.765 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 18:07:38.834 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:07:38.891 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:07:38.924 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:07:38.980 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:07:39.441 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@__firebaseUserId_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUserId_0
2024-11-22 18:07:39.549 +02:00 [INF] Executed DbCommand (54ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 18:07:39.878 +02:00 [INF] Executed DbCommand (251ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 18:07:39.892 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 18:07:39.938 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 49.2695ms.
2024-11-22 18:07:39.975 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 1065.5415ms
2024-11-22 18:07:39.988 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:07:40.002 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 1236.7514ms
2024-11-22 18:07:40.552 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:07:40.559 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:07:40.589 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.6998ms
2024-11-22 18:07:40.709 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 149.4717ms
2024-11-22 18:07:42.616 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=2 - null null
2024-11-22 18:07:42.625 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=2 - 404 0 null 9.5515ms
2024-11-22 18:07:42.628 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7061/Query/GetAssignedQueries, Response status code: 404
2024-11-22 18:07:46.278 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=5 - null null
2024-11-22 18:07:46.288 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=5 - 404 0 null 10.5457ms
2024-11-22 18:07:46.291 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7061/Query/GetAssignedQueries, Response status code: 404
2024-11-22 18:07:48.416 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=5 - null null
2024-11-22 18:07:48.422 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=5 - 404 0 null 5.4064ms
2024-11-22 18:07:48.423 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7061/Query/GetAssignedQueries, Response status code: 404
2024-11-22 18:07:50.302 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=6 - null null
2024-11-22 18:07:50.306 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=6 - 404 0 null 4.8049ms
2024-11-22 18:07:50.308 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7061/Query/GetAssignedQueries, Response status code: 404
2024-11-22 18:07:52.441 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=2 - null null
2024-11-22 18:07:52.444 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=2 - 404 0 null 3.0705ms
2024-11-22 18:07:52.446 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7061/Query/GetAssignedQueries, Response status code: 404
2024-11-22 18:11:59.689 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=5 - null null
2024-11-22 18:11:59.790 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=5 - 404 0 null 103.1038ms
2024-11-22 18:11:59.799 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7061/Query/GetAssignedQueries, Response status code: 404
2024-11-22 18:13:11.155 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 18:13:11.471 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 18:13:11.472 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 18:13:11.475 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 18:13:11.476 +02:00 [INF] Hosting environment: Development
2024-11-22 18:13:11.476 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 18:13:12.189 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 18:13:13.109 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:13:13.130 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:13:13.155 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:13:13.160 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:13:13.166 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:13:13.168 +02:00 [ERR] User not logged in.
2024-11-22 18:13:13.184 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 18:13:13.189 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 53.6864ms
2024-11-22 18:13:13.194 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:13:13.200 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 302 0 null 1012.7389ms
2024-11-22 18:13:13.221 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 18:13:13.242 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:13:13.248 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 18:13:14.991 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 18:13:15.872 +02:00 [INF] Executed DbCommand (87ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 18:13:15.996 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:13:15.997 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 18:13:16.000 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 18:13:16.002 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 2752.1751ms
2024-11-22 18:13:16.003 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:13:16.007 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:a9a9925e-d5f5-c136-1a4d-118abe79c854
2024-11-22 18:13:16.013 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 2792.4478ms
2024-11-22 18:13:16.014 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 18:13:16.022 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:13:16.025 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:13:16.027 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 18:13:16.028 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 1.8877ms
2024-11-22 18:13:16.029 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:13:16.030 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 15.4137ms
2024-11-22 18:13:16.036 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 18:13:16.040 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:13:16.046 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:13:16.186 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:13:16.329 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 18:13:16.439 +02:00 [INF] Executed DbCommand (62ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:13:16.747 +02:00 [INF] Executed DbCommand (88ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 18:13:16.779 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:13:16.789 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:13:16.801 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:13:16.811 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 18:13:16.943 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 137.0871ms.
2024-11-22 18:13:16.946 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 898.4603ms
2024-11-22 18:13:16.948 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:13:16.952 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 915.4403ms
2024-11-22 18:13:17.167 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:13:17.169 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:13:17.177 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 9.4851ms
2024-11-22 18:13:17.234 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 64.261ms
2024-11-22 18:13:17.398 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 18:13:17.402 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 18:13:17.413 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 18:13:17.414 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 16.3395ms
2024-11-22 18:13:17.560 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=xpKv4f6eksk9BfHoo_NMnw - null null
2024-11-22 18:13:17.564 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 18:13:17.627 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: qZ384GYqOIyukTSJpGxUYg
2024-11-22 18:13:17.634 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: qZ384GYqOIyukTSJpGxUYg
2024-11-22 18:13:20.425 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 18:13:20.435 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:13:20.439 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:13:20.444 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:13:20.449 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:13:20.454 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 18:13:20.474 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 21.289ms.
2024-11-22 18:13:20.476 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 34.8508ms
2024-11-22 18:13:20.478 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:13:20.480 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 55.1509ms
2024-11-22 18:13:20.496 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: qZ384GYqOIyukTSJpGxUYg
2024-11-22 18:13:20.497 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: qZ384GYqOIyukTSJpGxUYg
2024-11-22 18:13:20.503 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 18:13:20.504 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=xpKv4f6eksk9BfHoo_NMnw - 200 null null 2944.1394ms
2024-11-22 18:13:20.518 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:13:20.522 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 3.9086ms
2024-11-22 18:13:20.522 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:13:20.537 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 14.6885ms
2024-11-22 18:13:22.659 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 18:13:22.664 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:13:22.665 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:13:22.670 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:13:22.675 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:13:22.759 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__firebaseUserId_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUserId_0
2024-11-22 18:13:22.776 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 18:13:22.801 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 18:13:22.806 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 18:13:22.811 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 5.6233ms.
2024-11-22 18:13:22.812 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 146.2732ms
2024-11-22 18:13:22.813 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:13:22.815 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 155.6769ms
2024-11-22 18:13:22.853 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:13:22.855 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:13:22.858 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 2.7362ms
2024-11-22 18:13:22.858 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.111ms
2024-11-22 18:13:24.374 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=6 - null null
2024-11-22 18:13:24.381 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=6 - 404 0 null 6.4244ms
2024-11-22 18:13:24.382 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7061/Query/GetAssignedQueries, Response status code: 404
2024-11-22 18:13:41.012 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=5 - null null
2024-11-22 18:13:41.028 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=5 - 404 0 null 15.8893ms
2024-11-22 18:13:41.035 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7061/Query/GetAssignedQueries, Response status code: 404
2024-11-22 18:18:11.213 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=6 - null null
2024-11-22 18:18:11.338 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=6 - 404 0 null 129.8932ms
2024-11-22 18:18:11.345 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7061/Query/GetAssignedQueries, Response status code: 404
2024-11-22 18:18:12.482 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=6 - null null
2024-11-22 18:18:12.492 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=6 - 404 0 null 9.9114ms
2024-11-22 18:18:12.496 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7061/Query/GetAssignedQueries, Response status code: 404
2024-11-22 18:18:13.589 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=6 - null null
2024-11-22 18:18:13.595 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=6 - 404 0 null 6.0265ms
2024-11-22 18:18:13.599 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7061/Query/GetAssignedQueries, Response status code: 404
2024-11-22 18:18:14.684 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=6 - null null
2024-11-22 18:18:14.697 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=6 - 404 0 null 13.2731ms
2024-11-22 18:18:14.699 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7061/Query/GetAssignedQueries, Response status code: 404
2024-11-22 18:18:15.852 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=6 - null null
2024-11-22 18:18:15.857 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=6 - 404 0 null 4.8528ms
2024-11-22 18:18:15.860 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7061/Query/GetAssignedQueries, Response status code: 404
2024-11-22 18:18:17.609 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=6 - null null
2024-11-22 18:18:17.624 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=6 - 404 0 null 14.5548ms
2024-11-22 18:18:17.643 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7061/Query/GetAssignedQueries, Response status code: 404
2024-11-22 18:18:18.914 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=6 - null null
2024-11-22 18:18:18.920 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=6 - 404 0 null 5.3901ms
2024-11-22 18:18:18.925 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7061/Query/GetAssignedQueries, Response status code: 404
2024-11-22 18:18:20.195 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=6 - null null
2024-11-22 18:18:20.199 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Query/GetAssignedQueries?staffId=6 - 404 0 null 3.7116ms
2024-11-22 18:18:20.202 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7061/Query/GetAssignedQueries, Response status code: 404
2024-11-22 18:20:00.394 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 18:20:00.653 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 18:20:00.654 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 18:20:00.658 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 18:20:00.660 +02:00 [INF] Hosting environment: Development
2024-11-22 18:20:00.661 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 18:20:01.395 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 18:20:02.192 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:20:02.205 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:20:02.223 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:20:02.227 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:20:02.243 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:20:02.244 +02:00 [ERR] User not logged in.
2024-11-22 18:20:02.257 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 18:20:02.261 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 51.9382ms
2024-11-22 18:20:02.265 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:20:02.270 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 302 0 null 878.3377ms
2024-11-22 18:20:02.293 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 18:20:02.308 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:20:02.312 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 18:20:03.868 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 18:20:04.960 +02:00 [INF] Executed DbCommand (66ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 18:20:05.025 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:20:05.027 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 18:20:05.030 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 18:20:05.032 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 2718.5107ms
2024-11-22 18:20:05.033 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:20:05.036 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:ecbf4c9c-139e-c125-c372-800b427597e3
2024-11-22 18:20:05.042 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 2749.2468ms
2024-11-22 18:20:05.043 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 18:20:05.050 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:20:05.052 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:20:05.054 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 18:20:05.056 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 1.9686ms
2024-11-22 18:20:05.056 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:20:05.057 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 14.1851ms
2024-11-22 18:20:05.062 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 18:20:05.066 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:20:05.069 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:20:05.156 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:20:05.265 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 18:20:05.339 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:20:05.516 +02:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 18:20:05.541 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:20:05.551 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:20:05.564 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:20:05.575 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 18:20:05.668 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 99.451ms.
2024-11-22 18:20:05.672 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 600.9622ms
2024-11-22 18:20:05.674 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:20:05.676 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 613.6262ms
2024-11-22 18:20:05.965 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:20:05.973 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:20:05.977 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 12.382ms
2024-11-22 18:20:06.012 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.7041ms
2024-11-22 18:20:06.064 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 18:20:06.068 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 18:20:06.079 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 18:20:06.080 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 16.001ms
2024-11-22 18:20:06.107 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=3kNM-4N1W_K5nr2HjmM9EQ - null null
2024-11-22 18:20:06.110 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 18:20:06.222 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: AC465Ch0wTlHWBcrkcYuJw
2024-11-22 18:20:06.228 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: AC465Ch0wTlHWBcrkcYuJw
2024-11-22 18:20:15.097 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 18:20:15.113 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:20:15.117 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:20:15.122 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:20:15.126 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:20:15.130 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 18:20:15.149 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 20.8205ms.
2024-11-22 18:20:15.158 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 39.6786ms
2024-11-22 18:20:15.211 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:20:15.216 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: AC465Ch0wTlHWBcrkcYuJw
2024-11-22 18:20:15.217 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 119.1117ms
2024-11-22 18:20:15.217 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: AC465Ch0wTlHWBcrkcYuJw
2024-11-22 18:20:15.229 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 18:20:15.230 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=3kNM-4N1W_K5nr2HjmM9EQ - 200 null null 9123.0889ms
2024-11-22 18:20:15.236 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:20:15.240 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 3.9222ms
2024-11-22 18:20:15.242 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:20:15.312 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 69.8174ms
2024-11-22 18:20:16.559 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 18:20:16.603 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:20:16.647 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:20:16.694 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:20:16.816 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:20:17.208 +02:00 [INF] Executed DbCommand (72ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:20:17.276 +02:00 [INF] Executed DbCommand (49ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:20:17.616 +02:00 [INF] Executed DbCommand (253ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 18:20:17.810 +02:00 [INF] Executed DbCommand (54ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 18:20:17.823 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 18:20:17.908 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 86.2589ms.
2024-11-22 18:20:17.913 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 1228.3901ms
2024-11-22 18:20:17.914 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:20:17.915 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 1356.4721ms
2024-11-22 18:20:17.994 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:20:18.007 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 13.278ms
2024-11-22 18:20:18.010 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:20:18.035 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 25.0697ms
2024-11-22 18:21:04.448 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 18:21:04.550 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:21:04.554 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:21:04.582 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:21:04.611 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 18:21:04.654 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:21:04.734 +02:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 18:21:04.765 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:21:04.772 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:21:04.779 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:21:04.781 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 18:21:04.786 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 5.658ms.
2024-11-22 18:21:04.788 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 231.6294ms
2024-11-22 18:21:04.789 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:21:04.790 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 341.4368ms
2024-11-22 18:21:04.841 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:21:04.846 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 5.7917ms
2024-11-22 18:21:05.063 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 18:21:05.068 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 18:21:05.070 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 18:21:05.073 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 9.9625ms
2024-11-22 18:21:05.116 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=bwgQL5rqFibqrL-B1pbLDQ - null null
2024-11-22 18:21:05.125 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 18:21:05.527 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: Nk2DCUQJBS6HF7tA7yPiqA
2024-11-22 18:21:05.530 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: Nk2DCUQJBS6HF7tA7yPiqA
2024-11-22 18:21:09.700 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Account/Logout - application/x-www-form-urlencoded 225
2024-11-22 18:21:09.727 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Logout (Apptivate_UQMS_WebApp)'
2024-11-22 18:21:09.745 +02:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Logout() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 18:21:09.753 +02:00 [INF] User logged out.
2024-11-22 18:21:09.772 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 18:21:09.774 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Logout (Apptivate_UQMS_WebApp) in 27.1289ms
2024-11-22 18:21:09.775 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Logout (Apptivate_UQMS_WebApp)'
2024-11-22 18:21:09.776 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Account/Logout - 302 0 null 76.2639ms
2024-11-22 18:21:09.783 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 18:21:09.791 +02:00 [INF] Firebase was not authenticated. Failure message: No token provided.
2024-11-22 18:21:09.792 +02:00 [INF] Firebase was not authenticated. Failure message: No token provided.
2024-11-22 18:21:09.792 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:21:09.793 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 18:21:09.801 +02:00 [INF] Executing ViewResult, running view Login.
2024-11-22 18:21:09.836 +02:00 [INF] Executed ViewResult - view Login executed in 37.1562ms.
2024-11-22 18:21:09.838 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 43.5241ms
2024-11-22 18:21:09.839 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:21:09.840 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 200 null text/html; charset=utf-8 57.4588ms
2024-11-22 18:21:09.847 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: Nk2DCUQJBS6HF7tA7yPiqA
2024-11-22 18:21:09.848 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: Nk2DCUQJBS6HF7tA7yPiqA
2024-11-22 18:21:09.849 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 18:21:09.850 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=bwgQL5rqFibqrL-B1pbLDQ - 200 null null 4734.5873ms
2024-11-22 18:21:09.879 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:21:09.879 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:21:09.881 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 2.1739ms
2024-11-22 18:21:09.894 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.1016ms
2024-11-22 18:21:12.812 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 18:21:12.821 +02:00 [INF] Firebase was not authenticated. Failure message: No token provided.
2024-11-22 18:21:12.825 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-11-22 18:21:12.829 +02:00 [INF] AuthenticationScheme: Firebase was challenged.
2024-11-22 18:21:12.831 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 401 0 null 19.1258ms
2024-11-22 18:21:21.886 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/ - null null
2024-11-22 18:21:21.894 +02:00 [INF] Firebase was not authenticated. Failure message: No token provided.
2024-11-22 18:21:21.896 +02:00 [INF] Firebase was not authenticated. Failure message: No token provided.
2024-11-22 18:21:21.897 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.HomeController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:21:21.903 +02:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.HomeController (Apptivate_UQMS_WebApp).
2024-11-22 18:21:21.906 +02:00 [INF] Executing ViewResult, running view Index.
2024-11-22 18:21:21.913 +02:00 [INF] Executed ViewResult - view Index executed in 8.385ms.
2024-11-22 18:21:21.914 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.HomeController.Index (Apptivate_UQMS_WebApp) in 10.0244ms
2024-11-22 18:21:21.916 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.HomeController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:21:21.916 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/ - 200 null text/html; charset=utf-8 30.3179ms
2024-11-22 18:21:21.991 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:21:21.995 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:21:21.995 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 4.3004ms
2024-11-22 18:21:22.001 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.8198ms
2024-11-22 18:21:22.031 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/css/background-image.jpg - null null
2024-11-22 18:21:22.035 +02:00 [INF] Firebase was not authenticated. Failure message: No token provided.
2024-11-22 18:21:22.052 +02:00 [INF] Firebase was not authenticated. Failure message: No token provided.
2024-11-22 18:21:22.054 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/css/background-image.jpg - 404 0 null 22.5712ms
2024-11-22 18:21:22.056 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7061/css/background-image.jpg, Response status code: 404
2024-11-22 18:21:24.439 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 18:21:24.444 +02:00 [INF] Firebase was not authenticated. Failure message: No token provided.
2024-11-22 18:21:24.444 +02:00 [INF] Firebase was not authenticated. Failure message: No token provided.
2024-11-22 18:21:24.445 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:21:24.446 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 18:21:24.447 +02:00 [INF] Executing ViewResult, running view Login.
2024-11-22 18:21:24.449 +02:00 [INF] Executed ViewResult - view Login executed in 1.7361ms.
2024-11-22 18:21:24.450 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 2.7121ms
2024-11-22 18:21:24.450 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:21:24.451 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 200 null text/html; charset=utf-8 12.1238ms
2024-11-22 18:21:24.482 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:21:24.489 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:21:24.490 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 5.2626ms
2024-11-22 18:21:24.497 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.5665ms
2024-11-22 18:21:29.670 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Account/Login - application/x-www-form-urlencoded 225
2024-11-22 18:21:29.677 +02:00 [INF] Firebase was not authenticated. Failure message: No token provided.
2024-11-22 18:21:29.678 +02:00 [INF] Firebase was not authenticated. Failure message: No token provided.
2024-11-22 18:21:29.680 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:21:29.722 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginViewModel) on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 18:21:29.793 +02:00 [INF] Attempting to log in user with email: Daniel@gmail.com
2024-11-22 18:21:29.843 +02:00 [INF] Start processing HTTP request POST https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDXB0dEozyPQdXzlGyQFP1elMObEksarR0
2024-11-22 18:21:29.852 +02:00 [INF] Sending HTTP request POST https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDXB0dEozyPQdXzlGyQFP1elMObEksarR0
2024-11-22 18:21:30.412 +02:00 [INF] Received HTTP response headers after 553.9988ms - 200
2024-11-22 18:21:30.415 +02:00 [INF] End processing HTTP request after 575.3873ms - 200
2024-11-22 18:21:30.417 +02:00 [INF] User logged in successfully.
2024-11-22 18:21:30.987 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 18:21:31.209 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@p1='3', @p0='2024-11-22T16:21:30.9912037Z' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [LastSeen] = @p0
OUTPUT 1
WHERE [UserID] = @p1;
2024-11-22 18:21:31.233 +02:00 [INF] User Daniel@gmail.com logged in successfully.
2024-11-22 18:21:31.234 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 18:21:31.236 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 1511.108ms
2024-11-22 18:21:31.238 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:21:31.239 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Account/Login - 302 0 null 1568.8837ms
2024-11-22 18:21:31.247 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 18:21:31.251 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:21:31.252 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:21:31.261 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:21:31.281 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 18:21:31.320 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:21:31.423 +02:00 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 18:21:31.460 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:21:31.466 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:21:31.476 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:21:31.479 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 18:21:31.484 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 4.8986ms.
2024-11-22 18:21:31.486 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 231.7351ms
2024-11-22 18:21:31.488 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:21:31.489 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 242.3656ms
2024-11-22 18:21:31.528 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:21:31.531 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 2.7776ms
2024-11-22 18:21:31.534 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:21:31.548 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 14.3951ms
2024-11-22 18:21:31.620 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 18:21:31.624 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 18:21:31.626 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 18:21:31.627 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 7.2221ms
2024-11-22 18:21:31.689 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=H6Lf91ZhVEWaQUyaWNNj7Q - null null
2024-11-22 18:21:31.694 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 18:21:31.739 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: Z-WwymB1nqUg_Ev_hDBnbA
2024-11-22 18:21:31.740 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: Z-WwymB1nqUg_Ev_hDBnbA
2024-11-22 18:23:23.281 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 18:23:23.296 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:23:23.297 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:23:23.309 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:23:23.311 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:23:23.312 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 18:23:23.315 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 3.0834ms.
2024-11-22 18:23:23.316 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 18.0007ms
2024-11-22 18:23:23.317 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:23:23.318 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 36.8958ms
2024-11-22 18:23:23.327 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: Z-WwymB1nqUg_Ev_hDBnbA
2024-11-22 18:23:23.328 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: Z-WwymB1nqUg_Ev_hDBnbA
2024-11-22 18:23:23.329 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 18:23:23.330 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=H6Lf91ZhVEWaQUyaWNNj7Q - 200 null null 111640.4429ms
2024-11-22 18:23:23.350 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:23:23.351 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:23:23.354 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 3.6589ms
2024-11-22 18:23:23.360 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.6252ms
2024-11-22 18:23:24.260 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 18:23:24.266 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:23:24.268 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:23:24.272 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:23:24.274 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:23:24.286 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:23:24.296 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:23:24.303 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 18:23:24.311 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 18:23:24.312 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 18:23:24.316 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 3.2757ms.
2024-11-22 18:23:24.317 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 47.1241ms
2024-11-22 18:23:24.318 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:23:24.319 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 58.893ms
2024-11-22 18:23:24.335 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:23:24.335 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:23:24.339 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 3.4742ms
2024-11-22 18:23:24.340 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 4.8014ms
2024-11-22 18:36:57.286 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 18:36:57.552 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 18:36:57.554 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 18:36:57.560 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 18:36:57.562 +02:00 [INF] Hosting environment: Development
2024-11-22 18:36:57.562 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 18:36:58.397 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 18:36:59.919 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:36:59.941 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:36:59.974 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:36:59.980 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:37:00.005 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:37:00.006 +02:00 [ERR] User not logged in.
2024-11-22 18:37:00.083 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 18:37:00.094 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 147.003ms
2024-11-22 18:37:00.103 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:37:00.113 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 302 0 null 1721.755ms
2024-11-22 18:37:00.175 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 18:37:00.219 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:37:00.230 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 18:37:01.772 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 18:37:02.475 +02:00 [INF] Executed DbCommand (77ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 18:37:02.583 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:37:02.586 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 18:37:02.590 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 18:37:02.593 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 2360.9818ms
2024-11-22 18:37:02.595 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:37:02.599 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:d4c6890d-eab7-36cd-3759-5c2ebdd2d3b4
2024-11-22 18:37:02.607 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 2432.0656ms
2024-11-22 18:37:02.608 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 18:37:02.618 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:37:02.622 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:37:02.625 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 18:37:02.626 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 2.2824ms
2024-11-22 18:37:02.628 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:37:02.629 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 20.7449ms
2024-11-22 18:37:02.634 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 18:37:02.639 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:37:02.643 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:37:02.788 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:37:02.923 +02:00 [INF] Executed DbCommand (53ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 18:37:03.035 +02:00 [INF] Executed DbCommand (62ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:37:03.236 +02:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 18:37:03.264 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:37:03.275 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:37:03.289 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:37:03.301 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 18:37:03.409 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 114.2715ms.
2024-11-22 18:37:03.412 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 766.9255ms
2024-11-22 18:37:03.414 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:37:03.417 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 782.7653ms
2024-11-22 18:37:03.622 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:37:03.631 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 7.9599ms
2024-11-22 18:37:03.633 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:37:03.673 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 40.083ms
2024-11-22 18:37:03.981 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 18:37:03.987 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 18:37:04.000 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 18:37:04.002 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 20.3166ms
2024-11-22 18:37:04.051 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=Vd73iBBpqQwvUA_AcwFzjg - null null
2024-11-22 18:37:04.056 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 18:37:04.213 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: cO8PyLoTT--2yfslOWeoXA
2024-11-22 18:37:04.216 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: cO8PyLoTT--2yfslOWeoXA
2024-11-22 18:37:13.633 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 18:37:13.642 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:37:13.645 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:37:13.649 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:37:13.652 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:37:13.655 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 18:37:13.671 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 16.8133ms.
2024-11-22 18:37:13.672 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 26.0713ms
2024-11-22 18:37:13.674 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:37:13.675 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 41.9319ms
2024-11-22 18:37:13.688 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: cO8PyLoTT--2yfslOWeoXA
2024-11-22 18:37:13.689 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: cO8PyLoTT--2yfslOWeoXA
2024-11-22 18:37:13.694 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 18:37:13.695 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=Vd73iBBpqQwvUA_AcwFzjg - 200 null null 9643.6923ms
2024-11-22 18:37:13.709 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:37:13.709 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:37:13.713 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 3.7707ms
2024-11-22 18:37:13.722 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 12.8823ms
2024-11-22 18:37:14.560 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 18:37:14.566 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:37:14.567 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:37:14.574 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:37:14.577 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:37:14.666 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:37:14.978 +02:00 [INF] Executed DbCommand (301ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:37:15.035 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 18:37:15.061 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 18:37:15.065 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 18:37:15.114 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 49.9696ms.
2024-11-22 18:37:15.115 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 546.1725ms
2024-11-22 18:37:15.117 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:37:15.118 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 557.2903ms
2024-11-22 18:37:15.149 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:37:15.150 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:37:15.158 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 7.1178ms
2024-11-22 18:37:15.159 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.114ms
2024-11-22 18:37:26.465 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Query/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 22
2024-11-22 18:37:26.472 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Query/ReAssignQuery - 404 0 null 6.9972ms
2024-11-22 18:37:26.474 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Query/ReAssignQuery, Response status code: 404
2024-11-22 18:37:32.465 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Query/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 22
2024-11-22 18:37:32.476 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Query/ReAssignQuery - 404 0 null 11.0895ms
2024-11-22 18:37:32.479 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Query/ReAssignQuery, Response status code: 404
2024-11-22 18:37:33.484 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Query/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 22
2024-11-22 18:37:33.488 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Query/ReAssignQuery - 404 0 null 4.2643ms
2024-11-22 18:37:33.490 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Query/ReAssignQuery, Response status code: 404
2024-11-22 18:37:33.941 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Query/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 22
2024-11-22 18:37:33.945 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Query/ReAssignQuery - 404 0 null 3.8361ms
2024-11-22 18:37:33.948 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Query/ReAssignQuery, Response status code: 404
2024-11-22 18:37:34.123 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Query/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 22
2024-11-22 18:37:34.126 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Query/ReAssignQuery - 404 0 null 2.813ms
2024-11-22 18:37:34.129 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Query/ReAssignQuery, Response status code: 404
2024-11-22 18:37:34.294 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Query/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 22
2024-11-22 18:37:34.297 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Query/ReAssignQuery - 404 0 null 2.7682ms
2024-11-22 18:37:34.298 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Query/ReAssignQuery, Response status code: 404
2024-11-22 18:37:34.476 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Query/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 22
2024-11-22 18:37:34.479 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Query/ReAssignQuery - 404 0 null 2.8696ms
2024-11-22 18:37:34.481 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Query/ReAssignQuery, Response status code: 404
2024-11-22 18:37:34.648 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Query/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 22
2024-11-22 18:37:34.651 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Query/ReAssignQuery - 404 0 null 3.2774ms
2024-11-22 18:37:34.653 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Query/ReAssignQuery, Response status code: 404
2024-11-22 18:39:37.017 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 18:39:37.161 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 18:39:37.162 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 18:39:37.164 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 18:39:37.165 +02:00 [INF] Hosting environment: Development
2024-11-22 18:39:37.165 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 18:39:37.640 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 18:39:38.265 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:39:38.280 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:39:38.301 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:39:38.305 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:39:38.318 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:39:38.318 +02:00 [ERR] User not logged in.
2024-11-22 18:39:38.332 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 18:39:38.336 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 51.873ms
2024-11-22 18:39:38.343 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:39:38.346 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 302 0 null 707.4285ms
2024-11-22 18:39:38.354 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 18:39:38.367 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:39:38.371 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 18:39:39.743 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 18:39:40.351 +02:00 [INF] Executed DbCommand (82ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 18:39:40.443 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:39:40.445 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 18:39:40.449 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 18:39:40.451 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 2078.5208ms
2024-11-22 18:39:40.453 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:39:40.458 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:b8a023f6-aa7c-9d95-c362-8db8957368d3
2024-11-22 18:39:40.464 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 2110.2448ms
2024-11-22 18:39:40.468 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 18:39:40.476 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:39:40.479 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:39:40.481 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 18:39:40.482 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 1.7792ms
2024-11-22 18:39:40.483 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:39:40.484 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 15.4451ms
2024-11-22 18:39:40.489 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 18:39:40.493 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:39:40.498 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:39:40.599 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:39:40.710 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 18:39:40.778 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:39:40.947 +02:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 18:39:40.970 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:39:40.978 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:39:40.990 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:39:41.000 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 18:39:41.095 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 100.2423ms.
2024-11-22 18:39:41.098 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 599.1726ms
2024-11-22 18:39:41.100 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:39:41.102 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 612.818ms
2024-11-22 18:39:41.185 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:39:41.187 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:39:41.192 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 7.1749ms
2024-11-22 18:39:41.227 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 40.4648ms
2024-11-22 18:39:41.284 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 18:39:41.287 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 18:39:41.295 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 18:39:41.296 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 12.256ms
2024-11-22 18:39:41.321 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=BuWtiPcHuefxOK2YhUKkgg - null null
2024-11-22 18:39:41.323 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 18:39:41.413 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: ODdpig3a8LbwlRuKmYvPIw
2024-11-22 18:39:41.415 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: ODdpig3a8LbwlRuKmYvPIw
2024-11-22 18:39:47.501 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 18:39:47.511 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:39:47.514 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:39:47.521 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:39:47.525 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:39:47.528 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 18:39:47.543 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 17.1372ms.
2024-11-22 18:39:47.546 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 28.4607ms
2024-11-22 18:39:47.547 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:39:47.549 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 48.2878ms
2024-11-22 18:39:47.589 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: ODdpig3a8LbwlRuKmYvPIw
2024-11-22 18:39:47.592 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: ODdpig3a8LbwlRuKmYvPIw
2024-11-22 18:39:47.597 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 18:39:47.599 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=BuWtiPcHuefxOK2YhUKkgg - 200 null null 6278.3737ms
2024-11-22 18:39:47.606 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:39:47.611 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 4.706ms
2024-11-22 18:39:47.673 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:39:47.683 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.8874ms
2024-11-22 18:39:49.088 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 18:39:49.094 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:39:49.096 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:39:49.102 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:39:49.106 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:39:49.185 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:39:49.200 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:39:49.587 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 18:39:49.608 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 18:39:49.611 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 18:39:49.660 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 50.1228ms.
2024-11-22 18:39:49.663 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 565.0698ms
2024-11-22 18:39:49.664 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:39:49.666 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 578.2828ms
2024-11-22 18:39:49.691 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:39:49.691 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:39:49.695 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 3.6972ms
2024-11-22 18:39:49.697 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.4345ms
2024-11-22 18:40:24.659 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 18:40:24.669 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - 404 0 null 9.7964ms
2024-11-22 18:40:24.671 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Staff/ReAssignQuery, Response status code: 404
2024-11-22 18:40:26.984 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 18:40:26.990 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - 404 0 null 5.1639ms
2024-11-22 18:40:26.995 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Staff/ReAssignQuery, Response status code: 404
2024-11-22 18:40:27.405 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 18:40:27.408 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - 404 0 null 3.462ms
2024-11-22 18:40:27.411 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Staff/ReAssignQuery, Response status code: 404
2024-11-22 18:40:27.604 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 18:40:27.607 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - 404 0 null 2.6738ms
2024-11-22 18:40:27.610 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Staff/ReAssignQuery, Response status code: 404
2024-11-22 18:40:27.770 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 18:40:27.773 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - 404 0 null 3.207ms
2024-11-22 18:40:27.776 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Staff/ReAssignQuery, Response status code: 404
2024-11-22 18:40:27.949 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 18:40:27.954 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - 404 0 null 5.177ms
2024-11-22 18:40:27.958 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Staff/ReAssignQuery, Response status code: 404
2024-11-22 18:40:28.129 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 18:40:28.134 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - 404 0 null 4.2225ms
2024-11-22 18:40:28.136 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Staff/ReAssignQuery, Response status code: 404
2024-11-22 18:40:28.296 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 18:40:28.300 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - 404 0 null 3.7014ms
2024-11-22 18:40:28.302 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Staff/ReAssignQuery, Response status code: 404
2024-11-22 18:40:28.473 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 18:40:28.476 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - 404 0 null 3.3379ms
2024-11-22 18:40:28.480 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Staff/ReAssignQuery, Response status code: 404
2024-11-22 18:40:28.649 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 18:40:28.652 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - 404 0 null 3.0699ms
2024-11-22 18:40:28.654 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Staff/ReAssignQuery, Response status code: 404
2024-11-22 18:40:28.829 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 18:40:28.833 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - 404 0 null 3.6586ms
2024-11-22 18:40:28.834 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Staff/ReAssignQuery, Response status code: 404
2024-11-22 18:40:29.001 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 18:40:29.005 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - 404 0 null 4.1175ms
2024-11-22 18:40:29.007 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Staff/ReAssignQuery, Response status code: 404
2024-11-22 18:40:29.165 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 18:40:29.169 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - 404 0 null 3.8563ms
2024-11-22 18:40:29.170 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Staff/ReAssignQuery, Response status code: 404
2024-11-22 18:40:29.344 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 18:40:29.347 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - 404 0 null 2.969ms
2024-11-22 18:40:29.351 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Staff/ReAssignQuery, Response status code: 404
2024-11-22 18:40:29.520 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 18:40:29.524 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - 404 0 null 3.6468ms
2024-11-22 18:40:29.525 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Staff/ReAssignQuery, Response status code: 404
2024-11-22 18:40:29.689 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 18:40:29.692 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - 404 0 null 3.2641ms
2024-11-22 18:40:29.695 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Staff/ReAssignQuery, Response status code: 404
2024-11-22 18:41:41.132 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 18:41:41.289 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 18:41:41.290 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 18:41:41.297 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 18:41:41.300 +02:00 [INF] Hosting environment: Development
2024-11-22 18:41:41.301 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 18:41:41.696 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 18:41:42.307 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:41:42.321 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:41:42.346 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:41:42.350 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:41:42.366 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:41:42.367 +02:00 [ERR] User not logged in.
2024-11-22 18:41:42.378 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 18:41:42.381 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 56.3094ms
2024-11-22 18:41:42.384 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:41:42.388 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 302 0 null 693.7373ms
2024-11-22 18:41:42.394 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 18:41:42.407 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:41:42.410 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 18:41:43.831 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 18:41:44.420 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 18:41:44.488 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:41:44.491 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 18:41:44.494 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 18:41:44.495 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 2083.8094ms
2024-11-22 18:41:44.495 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:41:44.500 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:a1f3b44e-5a6e-ff3a-f543-2593bfcd843d
2024-11-22 18:41:44.504 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 2110.5762ms
2024-11-22 18:41:44.506 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 18:41:44.512 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:41:44.515 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:41:44.517 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 18:41:44.517 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 1.4138ms
2024-11-22 18:41:44.518 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:41:44.518 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 12.2362ms
2024-11-22 18:41:44.522 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 18:41:44.525 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:41:44.528 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:41:44.611 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:41:44.693 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 18:41:44.745 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:41:44.890 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 18:41:44.916 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:41:44.924 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:41:44.936 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:41:44.943 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 18:41:45.037 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 97.7241ms.
2024-11-22 18:41:45.041 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 511.8647ms
2024-11-22 18:41:45.043 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:41:45.047 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 525.1088ms
2024-11-22 18:41:45.095 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:41:45.095 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:41:45.116 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 20.7958ms
2024-11-22 18:41:45.139 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 18:41:45.150 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 18:41:45.172 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 76.2219ms
2024-11-22 18:41:45.185 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 18:41:45.186 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 46.8714ms
2024-11-22 18:41:45.259 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=USfgr10cE_lb6jtwaJMXaQ - null null
2024-11-22 18:41:45.265 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 18:41:45.310 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: qXiIhmY11iQNyIxvzIwaUQ
2024-11-22 18:41:45.313 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: qXiIhmY11iQNyIxvzIwaUQ
2024-11-22 18:41:46.652 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 18:41:46.660 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:41:46.665 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:41:46.669 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:41:46.672 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:41:46.673 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 18:41:46.683 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 10.8958ms.
2024-11-22 18:41:46.685 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 19.1583ms
2024-11-22 18:41:46.687 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:41:46.688 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 36.1032ms
2024-11-22 18:41:46.700 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: qXiIhmY11iQNyIxvzIwaUQ
2024-11-22 18:41:46.702 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: qXiIhmY11iQNyIxvzIwaUQ
2024-11-22 18:41:46.707 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 18:41:46.708 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=USfgr10cE_lb6jtwaJMXaQ - 200 null null 1448.4505ms
2024-11-22 18:41:46.711 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:41:46.714 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 2.9775ms
2024-11-22 18:41:46.720 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:41:46.736 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.6195ms
2024-11-22 18:41:47.936 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 18:41:47.941 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:41:47.942 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:41:47.948 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:41:47.952 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:41:48.012 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:41:48.026 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:41:48.067 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 18:41:48.081 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 18:41:48.086 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 18:41:48.120 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 34.9475ms.
2024-11-22 18:41:48.122 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 179.1285ms
2024-11-22 18:41:48.124 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:41:48.125 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 189.5063ms
2024-11-22 18:41:48.146 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:41:48.149 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:41:48.151 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 2.5218ms
2024-11-22 18:41:48.155 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.4854ms
2024-11-22 18:41:56.300 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 18:41:56.305 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Staff/ReAssignQuery - 404 0 null 5.6619ms
2024-11-22 18:41:56.308 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Staff/ReAssignQuery, Response status code: 404
2024-11-22 18:43:12.072 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 18:43:12.269 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 18:43:12.271 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 18:43:12.276 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 18:43:12.277 +02:00 [INF] Hosting environment: Development
2024-11-22 18:43:12.278 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 18:43:12.584 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 18:43:13.963 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:43:13.980 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:43:14.003 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:43:14.007 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:43:14.021 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:43:14.022 +02:00 [ERR] User not logged in.
2024-11-22 18:43:14.039 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 18:43:14.044 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 57.9474ms
2024-11-22 18:43:14.049 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:43:14.054 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 302 0 null 1473.267ms
2024-11-22 18:43:14.066 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 18:43:14.083 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:43:14.089 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 18:43:15.873 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 18:43:16.416 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 18:43:16.513 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:43:16.515 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 18:43:16.518 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 18:43:16.520 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 2428.8599ms
2024-11-22 18:43:16.521 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:43:16.525 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:8df553e6-16b8-f84b-bcf9-9e6787eda55e
2024-11-22 18:43:16.532 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 2466.7216ms
2024-11-22 18:43:16.534 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 18:43:16.542 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:43:16.545 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:43:16.547 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 18:43:16.548 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 2.2841ms
2024-11-22 18:43:16.550 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:43:16.551 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 17.2621ms
2024-11-22 18:43:16.556 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 18:43:16.561 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:43:16.565 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:43:16.665 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:43:16.781 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 18:43:16.874 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:43:17.107 +02:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 18:43:17.139 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:43:17.151 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:43:17.164 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:43:17.173 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 18:43:17.276 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 107.2078ms.
2024-11-22 18:43:17.280 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 712.3293ms
2024-11-22 18:43:17.282 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:43:17.285 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 728.8565ms
2024-11-22 18:43:17.394 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:43:17.408 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:43:17.410 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 15.7133ms
2024-11-22 18:43:17.450 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.9395ms
2024-11-22 18:43:17.484 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 18:43:17.490 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 18:43:17.505 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 18:43:17.506 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 21.7549ms
2024-11-22 18:43:17.594 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=7iKLcJYrxYrLktakXA6e9g - null null
2024-11-22 18:43:17.606 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 18:43:18.290 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: 5g4hcM5gOD1hYRcRq88pdg
2024-11-22 18:43:18.294 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: 5g4hcM5gOD1hYRcRq88pdg
2024-11-22 18:43:19.394 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 18:43:19.403 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:43:19.406 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:43:19.410 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:43:19.415 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:43:19.419 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 18:43:19.436 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 17.5817ms.
2024-11-22 18:43:19.439 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 31.4062ms
2024-11-22 18:43:19.440 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:43:19.441 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 46.8656ms
2024-11-22 18:43:19.457 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: 5g4hcM5gOD1hYRcRq88pdg
2024-11-22 18:43:19.459 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: 5g4hcM5gOD1hYRcRq88pdg
2024-11-22 18:43:19.464 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 18:43:19.466 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=7iKLcJYrxYrLktakXA6e9g - 200 null null 1871.9413ms
2024-11-22 18:43:19.473 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:43:19.474 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:43:19.476 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 2.6894ms
2024-11-22 18:43:19.490 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.9761ms
2024-11-22 18:43:20.209 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 18:43:20.215 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:43:20.217 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:43:20.222 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:43:20.226 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:43:20.344 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:43:20.362 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:43:20.422 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 18:43:20.443 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 18:43:20.449 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 18:43:20.502 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 54.8104ms.
2024-11-22 18:43:20.504 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 285.2752ms
2024-11-22 18:43:20.506 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:43:20.507 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 297.9881ms
2024-11-22 18:43:20.527 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:43:20.535 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:43:20.536 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.1694ms
2024-11-22 18:43:20.538 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 2.6671ms
2024-11-22 18:43:33.622 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/StaffQuery/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 18:43:33.629 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 

Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReassignQuery (Apptivate_UQMS_WebApp)
Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.Select(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.MatchAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-11-22 18:43:33.881 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/StaffQuery/ReAssignQuery - 500 null text/plain; charset=utf-8 258.7604ms
2024-11-22 18:44:26.677 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 18:44:26.782 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 18:44:26.783 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 18:44:26.786 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 18:44:26.788 +02:00 [INF] Hosting environment: Development
2024-11-22 18:44:26.789 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 18:44:27.081 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 18:44:27.600 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:44:27.617 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:44:27.640 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:44:27.645 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:44:27.656 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:44:27.657 +02:00 [ERR] User not logged in.
2024-11-22 18:44:27.672 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 18:44:27.675 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 53.964ms
2024-11-22 18:44:27.680 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:44:27.686 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 302 0 null 608.1405ms
2024-11-22 18:44:27.694 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 18:44:27.714 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:44:27.720 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 18:44:29.521 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 18:44:30.735 +02:00 [INF] Executed DbCommand (255ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 18:44:30.869 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:44:30.871 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 18:44:30.876 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 18:44:30.878 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 3156.3775ms
2024-11-22 18:44:30.883 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:44:30.889 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:6701ed96-2712-3760-a5e7-1fb68370be3c
2024-11-22 18:44:30.897 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 3202.1619ms
2024-11-22 18:44:30.902 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 18:44:30.916 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:44:30.919 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:44:30.921 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 18:44:30.922 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 2.3302ms
2024-11-22 18:44:30.923 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:44:30.924 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 22.4137ms
2024-11-22 18:44:30.932 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 18:44:30.941 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:44:30.955 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:44:31.145 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:44:31.276 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 18:44:31.372 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:44:31.526 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 18:44:31.552 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:44:31.563 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:44:31.578 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:44:31.588 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 18:44:31.686 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 101.6295ms.
2024-11-22 18:44:31.688 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 723.4964ms
2024-11-22 18:44:31.690 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:44:31.693 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 761.3698ms
2024-11-22 18:44:31.718 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:44:31.720 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:44:31.727 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 8.7592ms
2024-11-22 18:44:31.766 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 18:44:31.778 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 18:44:31.778 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 57.108ms
2024-11-22 18:44:31.792 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 18:44:31.794 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 28.6673ms
2024-11-22 18:44:31.842 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=phbnT1FqWCitcQtkJBpt6w - null null
2024-11-22 18:44:31.844 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 18:44:31.870 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: _ePPq3W2C22TLqvY0N1DxQ
2024-11-22 18:44:31.872 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: _ePPq3W2C22TLqvY0N1DxQ
2024-11-22 18:44:40.934 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 18:44:40.942 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:44:40.947 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:44:40.952 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:44:40.955 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:44:40.956 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 18:44:40.968 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 12.5428ms.
2024-11-22 18:44:40.969 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 19.6935ms
2024-11-22 18:44:40.970 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:44:40.971 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 37.8618ms
2024-11-22 18:44:40.984 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: _ePPq3W2C22TLqvY0N1DxQ
2024-11-22 18:44:40.986 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: _ePPq3W2C22TLqvY0N1DxQ
2024-11-22 18:44:40.989 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 18:44:40.990 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=phbnT1FqWCitcQtkJBpt6w - 200 null null 9148.2455ms
2024-11-22 18:44:40.992 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:44:40.993 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:44:40.995 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 2.2808ms
2024-11-22 18:44:41.012 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 18.166ms
2024-11-22 18:44:41.661 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 18:44:41.665 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:44:41.667 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:44:41.672 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:44:41.675 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:44:41.742 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:44:41.753 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:44:41.822 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 18:44:41.843 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 18:44:41.850 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 18:44:41.895 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 47.0364ms.
2024-11-22 18:44:41.896 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 228.0081ms
2024-11-22 18:44:41.897 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:44:41.898 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 237.61ms
2024-11-22 18:44:41.918 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:44:41.918 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:44:41.922 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 4.1918ms
2024-11-22 18:44:41.924 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.245ms
2024-11-22 18:44:51.767 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/StaffQuery/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 18:44:51.770 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:44:51.779 +02:00 [INF] Route matched with {action = "ReAssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReAssignQuery(Int32, Int32) on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:44:51.781 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:44:51.783 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:44:51.802 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:44:51.813 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__8__locals1_queryId_0='105' (Nullable = true), @__currentStaff_StaffID_1='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID]
FROM [QueryAssignments] AS [q]
WHERE [q].[QueryID] = @__8__locals1_queryId_0 AND [q].[StaffID] = @__currentStaff_StaffID_1
2024-11-22 18:44:51.819 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_newStaffId_0='0'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching]
FROM [StaffDetails] AS [s]
WHERE [s].[StaffID] = @__8__locals1_newStaffId_0
2024-11-22 18:44:51.821 +02:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-11-22 18:44:51.831 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp) in 51.1921ms
2024-11-22 18:44:51.832 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:44:51.832 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/StaffQuery/ReAssignQuery - 200 null application/json; charset=utf-8 65.5733ms
2024-11-22 18:49:23.373 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/StaffQuery/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 18:49:23.433 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:49:23.441 +02:00 [INF] Route matched with {action = "ReAssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReAssignQuery(Int32, Int32) on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:49:23.455 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:49:23.459 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:49:23.515 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:49:23.531 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_queryId_0='105' (Nullable = true), @__currentStaff_StaffID_1='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID]
FROM [QueryAssignments] AS [q]
WHERE [q].[QueryID] = @__8__locals1_queryId_0 AND [q].[StaffID] = @__currentStaff_StaffID_1
2024-11-22 18:49:23.534 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_newStaffId_0='0'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching]
FROM [StaffDetails] AS [s]
WHERE [s].[StaffID] = @__8__locals1_newStaffId_0
2024-11-22 18:49:23.537 +02:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-11-22 18:49:23.546 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp) in 103.7713ms
2024-11-22 18:49:23.547 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:49:23.548 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/StaffQuery/ReAssignQuery - 200 null application/json; charset=utf-8 177.6889ms
2024-11-22 18:51:16.835 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 18:51:17.098 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 18:51:17.099 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 18:51:17.108 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 18:51:17.109 +02:00 [INF] Hosting environment: Development
2024-11-22 18:51:17.111 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 18:51:17.763 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 18:51:18.965 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:51:18.979 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:51:19.000 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:51:19.005 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:51:19.022 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:51:19.024 +02:00 [ERR] User not logged in.
2024-11-22 18:51:19.044 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 18:51:19.050 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 66.2646ms
2024-11-22 18:51:19.058 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:51:19.064 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 302 0 null 1332.7406ms
2024-11-22 18:51:19.085 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 18:51:19.106 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:51:19.112 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 18:51:20.591 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 18:51:21.290 +02:00 [INF] Executed DbCommand (78ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 18:51:21.368 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:51:21.370 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 18:51:21.374 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 18:51:21.376 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 2261.8058ms
2024-11-22 18:51:21.377 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:51:21.381 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:befc9185-2dbf-9ffd-8971-1d1f42b42af2
2024-11-22 18:51:21.387 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 2301.863ms
2024-11-22 18:51:21.387 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 18:51:21.396 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:51:21.399 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:51:21.401 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 18:51:21.401 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 1.5538ms
2024-11-22 18:51:21.402 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:51:21.403 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 15.9324ms
2024-11-22 18:51:21.410 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 18:51:21.414 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:51:21.419 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:51:21.544 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:51:21.684 +02:00 [INF] Executed DbCommand (41ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 18:51:21.785 +02:00 [INF] Executed DbCommand (55ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:51:22.070 +02:00 [INF] Executed DbCommand (100ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 18:51:22.102 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:51:22.113 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:51:22.126 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:51:22.136 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 18:51:22.261 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 130.4029ms.
2024-11-22 18:51:22.264 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 842.487ms
2024-11-22 18:51:22.265 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:51:22.268 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 857.7637ms
2024-11-22 18:51:22.500 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:51:22.500 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:51:22.516 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 15.8766ms
2024-11-22 18:51:22.561 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 61.0865ms
2024-11-22 18:51:22.581 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 18:51:22.586 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 18:51:22.597 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 18:51:22.598 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 16.5982ms
2024-11-22 18:51:22.648 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=Oamjc8Hxc7b3YXtps63eDg - null null
2024-11-22 18:51:22.652 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 18:51:22.751 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: nfNvFXdfw8L6HMlZTAAM5w
2024-11-22 18:51:22.753 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: nfNvFXdfw8L6HMlZTAAM5w
2024-11-22 18:51:26.395 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 18:51:26.404 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:51:26.408 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:51:26.413 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:51:26.417 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:51:26.420 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 18:51:26.435 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 16.5696ms.
2024-11-22 18:51:26.437 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 27.0587ms
2024-11-22 18:51:26.438 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:51:26.440 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 44.6677ms
2024-11-22 18:51:26.452 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: nfNvFXdfw8L6HMlZTAAM5w
2024-11-22 18:51:26.453 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: nfNvFXdfw8L6HMlZTAAM5w
2024-11-22 18:51:26.458 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 18:51:26.459 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=Oamjc8Hxc7b3YXtps63eDg - 200 null null 3810.31ms
2024-11-22 18:51:26.470 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:51:26.474 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 3.3212ms
2024-11-22 18:51:26.475 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:51:26.482 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.3932ms
2024-11-22 18:51:27.348 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 18:51:27.353 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:51:27.355 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:51:27.361 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:51:27.365 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:51:27.467 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:51:27.486 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:51:27.542 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 18:51:27.566 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 18:51:27.569 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 18:51:27.627 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 58.9507ms.
2024-11-22 18:51:27.629 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 271.6978ms
2024-11-22 18:51:27.630 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:51:27.631 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 282.5228ms
2024-11-22 18:51:27.668 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:51:27.670 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:51:27.672 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 2.0936ms
2024-11-22 18:51:27.674 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.4931ms
2024-11-22 18:51:40.247 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/StaffQuery/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 18:51:40.249 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:51:40.258 +02:00 [INF] Route matched with {action = "ReAssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReAssignQuery(Int32, Int32) on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:51:40.261 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:51:40.263 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:51:40.282 +02:00 [INF] ReAssignQuery hit!!!
2024-11-22 18:51:40.290 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:51:40.313 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_queryId_0='105' (Nullable = true), @__currentStaff_StaffID_1='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID]
FROM [QueryAssignments] AS [q]
WHERE [q].[QueryID] = @__8__locals1_queryId_0 AND [q].[StaffID] = @__currentStaff_StaffID_1
2024-11-22 18:51:40.320 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_newStaffId_0='0'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching]
FROM [StaffDetails] AS [s]
WHERE [s].[StaffID] = @__8__locals1_newStaffId_0
2024-11-22 18:51:40.324 +02:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-11-22 18:51:40.339 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp) in 80.2227ms
2024-11-22 18:51:40.341 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:51:40.342 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/StaffQuery/ReAssignQuery - 200 null application/json; charset=utf-8 95.4911ms
2024-11-22 18:54:22.204 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 18:54:22.404 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 18:54:22.405 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 18:54:22.408 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 18:54:22.409 +02:00 [INF] Hosting environment: Development
2024-11-22 18:54:22.409 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 18:54:22.955 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 18:54:23.561 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:54:23.572 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:54:23.590 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:54:23.594 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:54:23.607 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:54:23.608 +02:00 [ERR] User not logged in.
2024-11-22 18:54:23.621 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 18:54:23.625 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 49.1907ms
2024-11-22 18:54:23.629 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:54:23.634 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 302 0 null 679.8783ms
2024-11-22 18:54:23.647 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 18:54:23.663 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:54:23.669 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 18:54:25.038 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 18:54:25.646 +02:00 [INF] Executed DbCommand (60ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 18:54:25.718 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:54:25.721 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 18:54:25.724 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 18:54:25.725 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 2054.9818ms
2024-11-22 18:54:25.726 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:54:25.729 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:62be051f-7bba-f45b-89e6-d94daa2a80c2
2024-11-22 18:54:25.736 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 2089.1655ms
2024-11-22 18:54:25.737 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 18:54:25.744 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:54:25.746 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:54:25.748 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 18:54:25.749 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 1.7507ms
2024-11-22 18:54:25.750 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:54:25.751 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 14.0498ms
2024-11-22 18:54:25.757 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 18:54:25.761 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:54:25.764 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:54:25.852 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:54:25.971 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 18:54:26.067 +02:00 [INF] Executed DbCommand (57ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:54:26.243 +02:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 18:54:26.277 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:54:26.291 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:54:26.304 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:54:26.312 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 18:54:26.406 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 97.1324ms.
2024-11-22 18:54:26.409 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 643.2387ms
2024-11-22 18:54:26.411 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:54:26.414 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 656.4597ms
2024-11-22 18:54:26.534 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:54:26.539 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:54:26.546 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 11.9093ms
2024-11-22 18:54:26.583 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.2428ms
2024-11-22 18:54:26.697 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 18:54:26.703 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 18:54:26.717 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 18:54:26.719 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 21.8852ms
2024-11-22 18:54:26.881 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=F2tHxZazRjKYjsn1mWp-jg - null null
2024-11-22 18:54:26.885 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 18:54:26.964 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: RwPB87cCUbxc3ekdd0wUfQ
2024-11-22 18:54:26.967 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: RwPB87cCUbxc3ekdd0wUfQ
2024-11-22 18:54:28.326 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 18:54:28.335 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:54:28.338 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:54:28.342 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:54:28.345 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:54:28.347 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 18:54:28.360 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 14.4014ms.
2024-11-22 18:54:28.362 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 22.3885ms
2024-11-22 18:54:28.363 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:54:28.364 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 37.987ms
2024-11-22 18:54:28.379 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: RwPB87cCUbxc3ekdd0wUfQ
2024-11-22 18:54:28.381 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: RwPB87cCUbxc3ekdd0wUfQ
2024-11-22 18:54:28.387 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 18:54:28.389 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:54:28.389 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=F2tHxZazRjKYjsn1mWp-jg - 200 null null 1508.694ms
2024-11-22 18:54:28.393 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 4.3569ms
2024-11-22 18:54:28.394 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:54:28.406 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 11.8338ms
2024-11-22 18:54:29.184 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 18:54:29.191 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:54:29.193 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:54:29.197 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:54:29.201 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:54:29.266 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:54:29.282 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:54:29.332 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 18:54:29.361 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 18:54:29.365 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 18:54:29.410 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 45.8742ms.
2024-11-22 18:54:29.414 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 219.2127ms
2024-11-22 18:54:29.415 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:54:29.418 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 233.1412ms
2024-11-22 18:54:29.450 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:54:29.450 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:54:29.454 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 3.3017ms
2024-11-22 18:54:29.459 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.7377ms
2024-11-22 18:54:40.795 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/StaffQuery/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 18:54:40.798 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:54:40.807 +02:00 [INF] Route matched with {action = "ReAssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReAssignQuery(Int32, Int32) on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:54:40.810 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:54:40.812 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:54:40.828 +02:00 [INF] ReAssignQuery hit!!!
2024-11-22 18:54:40.829 +02:00 [INF] found firebaseId for user  hit!!!8gmggRNCMUaYTwAThlXahoTs8W12
2024-11-22 18:54:40.852 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:54:40.854 +02:00 [INF] found current staff for user  hit!!!Apptivate_UQMS_WebApp.Models.Account+StaffDetail
2024-11-22 18:54:40.864 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_queryId_0='106' (Nullable = true), @__currentStaff_StaffID_1='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID]
FROM [QueryAssignments] AS [q]
WHERE [q].[QueryID] = @__8__locals1_queryId_0 AND [q].[StaffID] = @__currentStaff_StaffID_1
2024-11-22 18:54:40.867 +02:00 [INF]  Query assignment  Apptivate_UQMS_WebApp.Models.QueryModel+QueryAssignment
2024-11-22 18:54:40.874 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_newStaffId_0='0'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching]
FROM [StaffDetails] AS [s]
WHERE [s].[StaffID] = @__8__locals1_newStaffId_0
2024-11-22 18:54:40.876 +02:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-11-22 18:54:40.890 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp) in 81.5459ms
2024-11-22 18:54:40.891 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:54:40.892 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/StaffQuery/ReAssignQuery - 200 null application/json; charset=utf-8 96.9872ms
2024-11-22 18:56:56.093 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 18:56:56.294 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 18:56:56.296 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 18:56:56.300 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 18:56:56.302 +02:00 [INF] Hosting environment: Development
2024-11-22 18:56:56.302 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 18:56:57.008 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 18:56:57.623 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:56:57.637 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:56:57.656 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:56:57.660 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:56:57.681 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:56:57.684 +02:00 [ERR] User not logged in.
2024-11-22 18:56:57.699 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 18:56:57.703 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 62.5512ms
2024-11-22 18:56:57.707 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:56:57.711 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 302 0 null 705.3355ms
2024-11-22 18:56:57.750 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 18:56:57.766 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:56:57.771 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 18:56:59.274 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 18:56:59.864 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 18:56:59.941 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:56:59.943 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 18:56:59.948 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 18:56:59.950 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 2178.573ms
2024-11-22 18:56:59.951 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:56:59.955 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:de51e232-75f7-615b-1f4c-b4d95102be50
2024-11-22 18:56:59.960 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 2210.1912ms
2024-11-22 18:56:59.963 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 18:56:59.970 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:56:59.972 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:56:59.975 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 18:56:59.976 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 1.7415ms
2024-11-22 18:56:59.976 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:56:59.977 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 14.5512ms
2024-11-22 18:56:59.985 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 18:56:59.989 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:56:59.992 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:57:00.099 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:57:00.218 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 18:57:00.296 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:57:00.696 +02:00 [INF] Executed DbCommand (150ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 18:57:00.874 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:57:00.887 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:57:00.902 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:57:00.913 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 18:57:01.032 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 124.0001ms.
2024-11-22 18:57:01.052 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 1057.7004ms
2024-11-22 18:57:01.053 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:57:01.058 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 1073.3095ms
2024-11-22 18:57:01.264 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:57:01.265 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:57:01.291 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 26.3459ms
2024-11-22 18:57:01.344 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 79.2194ms
2024-11-22 18:57:01.373 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 18:57:01.389 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 18:57:01.410 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 18:57:01.413 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 39.4304ms
2024-11-22 18:57:01.527 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=xgg3CARtcyn8vkp9h_t_fg - null null
2024-11-22 18:57:01.531 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 18:57:01.630 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: pi0uR9amAf_jobprR-m3dw
2024-11-22 18:57:01.635 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: pi0uR9amAf_jobprR-m3dw
2024-11-22 18:57:01.900 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 18:57:01.909 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:57:01.912 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:57:01.918 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:57:01.923 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:57:01.925 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 18:57:01.942 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 17.8459ms.
2024-11-22 18:57:01.943 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 29.4386ms
2024-11-22 18:57:01.944 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:57:01.946 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 45.2455ms
2024-11-22 18:57:01.965 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: pi0uR9amAf_jobprR-m3dw
2024-11-22 18:57:01.967 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: pi0uR9amAf_jobprR-m3dw
2024-11-22 18:57:01.974 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 18:57:01.976 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=xgg3CARtcyn8vkp9h_t_fg - 200 null null 448.3923ms
2024-11-22 18:57:01.984 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:57:01.988 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:57:01.991 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 7.0449ms
2024-11-22 18:57:02.019 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.4587ms
2024-11-22 18:57:02.810 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 18:57:02.819 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:57:02.820 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:57:02.826 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:57:02.832 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:57:02.960 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:57:02.982 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:57:03.057 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 18:57:03.080 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 18:57:03.084 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 18:57:03.145 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 61.8825ms.
2024-11-22 18:57:03.147 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 325.5584ms
2024-11-22 18:57:03.149 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:57:03.150 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 339.8464ms
2024-11-22 18:57:03.190 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:57:03.192 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:57:03.201 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.8655ms
2024-11-22 18:57:03.202 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 9.8303ms
2024-11-22 18:57:19.324 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/StaffQuery/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 18:57:19.329 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:57:19.339 +02:00 [INF] Route matched with {action = "ReAssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReAssignQuery(Int32, Int32) on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:57:19.342 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:57:19.346 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:57:19.364 +02:00 [INF] ReAssignQuery hit!!!0
2024-11-22 18:57:19.365 +02:00 [INF] found firebaseId for user  hit!!!8gmggRNCMUaYTwAThlXahoTs8W12
2024-11-22 18:57:19.372 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:57:19.374 +02:00 [INF] found current staff for user  hit!!!Apptivate_UQMS_WebApp.Models.Account+StaffDetail
2024-11-22 18:57:19.382 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_queryId_0='106' (Nullable = true), @__currentStaff_StaffID_1='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID]
FROM [QueryAssignments] AS [q]
WHERE [q].[QueryID] = @__8__locals1_queryId_0 AND [q].[StaffID] = @__currentStaff_StaffID_1
2024-11-22 18:57:19.384 +02:00 [INF]  Query assignment  Apptivate_UQMS_WebApp.Models.QueryModel+QueryAssignment
2024-11-22 18:57:19.390 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_newStaffId_0='0'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching]
FROM [StaffDetails] AS [s]
WHERE [s].[StaffID] = @__8__locals1_newStaffId_0
2024-11-22 18:57:19.392 +02:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-11-22 18:57:19.405 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp) in 64.0036ms
2024-11-22 18:57:19.405 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:57:19.406 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/StaffQuery/ReAssignQuery - 200 null application/json; charset=utf-8 82.0359ms
2024-11-22 18:59:00.457 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/StaffQuery/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 18:59:00.480 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:59:00.481 +02:00 [INF] Route matched with {action = "ReAssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReAssignQuery(Int32, Int32) on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:59:00.491 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:59:00.496 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:59:00.503 +02:00 [INF] ReAssignQuery hit!!!0
2024-11-22 18:59:00.504 +02:00 [INF] found firebaseId for user  hit!!!8gmggRNCMUaYTwAThlXahoTs8W12
2024-11-22 18:59:00.525 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:59:00.528 +02:00 [INF] found current staff for user  hit!!!Apptivate_UQMS_WebApp.Models.Account+StaffDetail
2024-11-22 18:59:00.539 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__8__locals1_queryId_0='106' (Nullable = true), @__currentStaff_StaffID_1='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID]
FROM [QueryAssignments] AS [q]
WHERE [q].[QueryID] = @__8__locals1_queryId_0 AND [q].[StaffID] = @__currentStaff_StaffID_1
2024-11-22 18:59:00.540 +02:00 [INF]  Query assignment  Apptivate_UQMS_WebApp.Models.QueryModel+QueryAssignment
2024-11-22 18:59:00.544 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_newStaffId_0='0'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching]
FROM [StaffDetails] AS [s]
WHERE [s].[StaffID] = @__8__locals1_newStaffId_0
2024-11-22 18:59:00.546 +02:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-11-22 18:59:00.548 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp) in 65.1451ms
2024-11-22 18:59:00.549 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:59:00.550 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/StaffQuery/ReAssignQuery - 200 null application/json; charset=utf-8 95.4808ms
2024-11-22 18:59:25.794 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 18:59:25.976 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 18:59:25.978 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 18:59:25.983 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 18:59:25.986 +02:00 [INF] Hosting environment: Development
2024-11-22 18:59:25.988 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 18:59:26.294 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 18:59:27.968 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:59:27.982 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:59:28.007 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:59:28.012 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:59:28.023 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:59:28.024 +02:00 [ERR] User not logged in.
2024-11-22 18:59:28.039 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 18:59:28.043 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 56.17ms
2024-11-22 18:59:28.047 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:59:28.052 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 302 0 null 1759.9896ms
2024-11-22 18:59:28.421 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 18:59:28.484 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:59:28.492 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 18:59:30.098 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 18:59:30.752 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 18:59:30.831 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 18:59:30.834 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 18:59:30.837 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 18:59:30.839 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 2345.4839ms
2024-11-22 18:59:30.841 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 18:59:30.845 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:006a5bb3-74d6-0ffd-8a7f-8e8e30f18df1
2024-11-22 18:59:30.851 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 2430.4493ms
2024-11-22 18:59:30.853 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 18:59:30.862 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:59:30.865 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:59:30.868 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 18:59:30.868 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 1.7452ms
2024-11-22 18:59:30.869 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 18:59:30.870 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 17.2136ms
2024-11-22 18:59:30.875 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 18:59:30.880 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:59:30.883 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 18:59:30.969 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:59:31.059 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 18:59:31.146 +02:00 [INF] Executed DbCommand (54ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:59:31.335 +02:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 18:59:31.363 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:59:31.373 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:59:31.386 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 18:59:31.396 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 18:59:31.496 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 104.31ms.
2024-11-22 18:59:31.498 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 613.4821ms
2024-11-22 18:59:31.499 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:59:31.502 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 627.0363ms
2024-11-22 18:59:31.520 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:59:31.527 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 7.2343ms
2024-11-22 18:59:31.529 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:59:31.570 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.3715ms
2024-11-22 18:59:31.589 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 18:59:31.597 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 18:59:31.608 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 18:59:31.609 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 19.7686ms
2024-11-22 18:59:31.683 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=u8fy1ulIWuGQYqLm24z9bg - null null
2024-11-22 18:59:31.686 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 18:59:31.748 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: rlftRBmI_eh6Dr7PijQXLA
2024-11-22 18:59:31.751 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: rlftRBmI_eh6Dr7PijQXLA
2024-11-22 18:59:41.491 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 18:59:41.499 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:59:41.502 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:59:41.505 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:59:41.508 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:59:41.510 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 18:59:41.522 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 13.4605ms.
2024-11-22 18:59:41.523 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 20.2075ms
2024-11-22 18:59:41.524 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 18:59:41.524 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 33.8097ms
2024-11-22 18:59:41.539 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: rlftRBmI_eh6Dr7PijQXLA
2024-11-22 18:59:41.540 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: rlftRBmI_eh6Dr7PijQXLA
2024-11-22 18:59:41.542 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:59:41.544 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:59:41.546 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 18:59:41.548 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=u8fy1ulIWuGQYqLm24z9bg - 200 null null 9864.8738ms
2024-11-22 18:59:41.549 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 6.4652ms
2024-11-22 18:59:41.563 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 18.4624ms
2024-11-22 18:59:42.284 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 18:59:42.289 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:59:42.290 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 18:59:42.296 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:59:42.300 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 18:59:42.374 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 18:59:42.385 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 18:59:42.425 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 18:59:42.440 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 18:59:42.444 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 18:59:42.481 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 38.0333ms.
2024-11-22 18:59:42.483 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 191.4918ms
2024-11-22 18:59:42.484 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 18:59:42.485 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 200.7906ms
2024-11-22 18:59:42.505 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 18:59:42.505 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 18:59:42.508 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 2.8659ms
2024-11-22 18:59:42.514 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.4121ms
2024-11-22 18:59:55.100 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Query/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 11
2024-11-22 18:59:55.108 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Query/ReAssignQuery - 404 0 null 8.4442ms
2024-11-22 18:59:55.112 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7061/Query/ReAssignQuery, Response status code: 404
2024-11-22 19:00:16.629 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 19:00:16.727 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 19:00:16.730 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 19:00:16.731 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 19:00:16.732 +02:00 [INF] Hosting environment: Development
2024-11-22 19:00:16.733 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 19:00:17.259 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:00:18.022 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:00:18.034 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:00:18.052 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:00:18.055 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:00:18.062 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:00:18.063 +02:00 [ERR] User not logged in.
2024-11-22 19:00:18.073 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 19:00:18.076 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 37.45ms
2024-11-22 19:00:18.080 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:00:18.083 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 302 0 null 825.4163ms
2024-11-22 19:00:18.087 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 19:00:18.100 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:00:18.104 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 19:00:19.488 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 19:00:19.929 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 19:00:19.993 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:00:19.995 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 19:00:19.998 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 19:00:19.999 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 1894.6366ms
2024-11-22 19:00:20.000 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:00:20.003 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:0681e51f-4628-1807-c82f-c097bf32c126
2024-11-22 19:00:20.008 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 1920.1639ms
2024-11-22 19:00:20.008 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 19:00:20.017 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:00:20.019 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:00:20.020 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 19:00:20.021 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 1.508ms
2024-11-22 19:00:20.022 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:00:20.022 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 14.027ms
2024-11-22 19:00:20.027 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 19:00:20.031 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:00:20.034 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:00:20.111 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:00:20.193 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 19:00:20.253 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:00:20.418 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 19:00:20.447 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:00:20.455 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:00:20.468 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:00:20.475 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 19:00:20.550 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 77.2195ms.
2024-11-22 19:00:20.555 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 519.1609ms
2024-11-22 19:00:20.558 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:00:20.562 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 534.9728ms
2024-11-22 19:00:20.583 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:00:20.584 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:00:20.597 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 8.4389ms
2024-11-22 19:00:20.627 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 42.7542ms
2024-11-22 19:00:20.658 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 19:00:20.665 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 19:00:20.674 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 19:00:20.675 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 16.9511ms
2024-11-22 19:00:20.722 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=rP_5kYZ9Jg8ljFSh55DFrQ - null null
2024-11-22 19:00:20.727 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 19:00:20.788 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: xGvUdW06cdvEEQBowBcYsQ
2024-11-22 19:00:20.790 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: xGvUdW06cdvEEQBowBcYsQ
2024-11-22 19:00:21.115 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 19:00:21.124 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:00:21.129 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:00:21.133 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:00:21.136 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:00:21.138 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 19:00:21.149 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 11.4056ms.
2024-11-22 19:00:21.150 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 19.4423ms
2024-11-22 19:00:21.150 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:00:21.151 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 36.1891ms
2024-11-22 19:00:21.163 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: xGvUdW06cdvEEQBowBcYsQ
2024-11-22 19:00:21.164 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: xGvUdW06cdvEEQBowBcYsQ
2024-11-22 19:00:21.169 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 19:00:21.169 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=rP_5kYZ9Jg8ljFSh55DFrQ - 200 null null 447.2497ms
2024-11-22 19:00:21.172 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:00:21.173 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:00:21.175 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 2.8737ms
2024-11-22 19:00:21.190 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 17.482ms
2024-11-22 19:00:21.822 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:00:21.833 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:00:21.835 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:00:21.839 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:00:21.842 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:00:21.904 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:00:21.931 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:00:21.975 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 19:00:21.989 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 19:00:21.992 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 19:00:22.157 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 164.8492ms.
2024-11-22 19:00:22.160 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 323.2342ms
2024-11-22 19:00:22.162 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:00:22.163 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 341.0307ms
2024-11-22 19:00:22.267 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:00:22.267 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:00:22.274 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 6.7538ms
2024-11-22 19:00:22.282 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 14.5772ms
2024-11-22 19:00:30.439 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/StaffQuery/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 11
2024-11-22 19:00:30.447 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:00:30.454 +02:00 [INF] Route matched with {action = "ReAssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReAssignQuery(Int32, Int32) on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:00:30.457 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:00:30.460 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:00:30.475 +02:00 [INF] ReAssignQuery hit!!!0
2024-11-22 19:00:30.477 +02:00 [INF] found firebaseId for user  hit!!!8gmggRNCMUaYTwAThlXahoTs8W12
2024-11-22 19:00:30.482 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:00:30.483 +02:00 [INF] found current staff for user  hit!!!Apptivate_UQMS_WebApp.Models.Account+StaffDetail
2024-11-22 19:00:30.490 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_queryId_0='106' (Nullable = true), @__currentStaff_StaffID_1='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID]
FROM [QueryAssignments] AS [q]
WHERE [q].[QueryID] = @__8__locals1_queryId_0 AND [q].[StaffID] = @__currentStaff_StaffID_1
2024-11-22 19:00:30.492 +02:00 [INF]  Query assignment  Apptivate_UQMS_WebApp.Models.QueryModel+QueryAssignment
2024-11-22 19:00:30.497 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_newStaffId_0='0'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching]
FROM [StaffDetails] AS [s]
WHERE [s].[StaffID] = @__8__locals1_newStaffId_0
2024-11-22 19:00:30.501 +02:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-11-22 19:00:30.518 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp) in 62.3606ms
2024-11-22 19:00:30.519 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:00:30.521 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/StaffQuery/ReAssignQuery - 200 null application/json; charset=utf-8 81.535ms
2024-11-22 19:04:34.485 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 19:04:34.652 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 19:04:34.653 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 19:04:34.656 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 19:04:34.657 +02:00 [INF] Hosting environment: Development
2024-11-22 19:04:34.657 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 19:04:35.173 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:04:36.156 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:04:36.169 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:04:36.185 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:04:36.190 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:04:36.201 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:04:36.202 +02:00 [ERR] User not logged in.
2024-11-22 19:04:36.216 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 19:04:36.220 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 46.7805ms
2024-11-22 19:04:36.225 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:04:36.230 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 302 0 null 1058.8928ms
2024-11-22 19:04:36.237 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 19:04:36.253 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:04:36.259 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 19:04:38.735 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 19:04:39.255 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 19:04:39.316 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:04:39.319 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 19:04:39.322 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 19:04:39.323 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 3063.099ms
2024-11-22 19:04:39.324 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:04:39.326 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:0fa38857-f838-6792-ee17-5551b7743d0a
2024-11-22 19:04:39.332 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 3094.9299ms
2024-11-22 19:04:39.336 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 19:04:39.344 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:04:39.346 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:04:39.347 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 19:04:39.348 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 1.2818ms
2024-11-22 19:04:39.348 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:04:39.349 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 13.2074ms
2024-11-22 19:04:39.352 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 19:04:39.357 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:04:39.360 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:04:39.435 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:04:39.512 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 19:04:39.569 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:04:39.706 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 19:04:39.732 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:04:39.740 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:04:39.750 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:04:39.757 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 19:04:39.837 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 83.577ms.
2024-11-22 19:04:39.840 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 478.7908ms
2024-11-22 19:04:39.842 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:04:39.847 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 494.4642ms
2024-11-22 19:04:39.909 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:04:39.910 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:04:39.920 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 11.4086ms
2024-11-22 19:04:39.954 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.6611ms
2024-11-22 19:04:39.962 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 19:04:39.978 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 19:04:39.997 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 19:04:39.999 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 36.7457ms
2024-11-22 19:04:40.072 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=BZUk-cP3a-3VxSGrXnraQQ - null null
2024-11-22 19:04:40.080 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 19:04:40.140 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: empNjhpwtuYTy_g_Winyrg
2024-11-22 19:04:40.145 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: empNjhpwtuYTy_g_Winyrg
2024-11-22 19:04:46.577 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 19:04:46.592 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:04:46.610 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:04:46.625 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:04:46.632 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:04:46.643 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 19:04:46.676 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 41.5275ms.
2024-11-22 19:04:46.708 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 90.8358ms
2024-11-22 19:04:46.719 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:04:46.725 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 147.7591ms
2024-11-22 19:04:46.737 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:04:46.738 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:04:46.740 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: empNjhpwtuYTy_g_Winyrg
2024-11-22 19:04:46.754 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 16.9527ms
2024-11-22 19:04:46.757 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: empNjhpwtuYTy_g_Winyrg
2024-11-22 19:04:46.766 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 19:04:46.768 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=BZUk-cP3a-3VxSGrXnraQQ - 200 null null 6695.7571ms
2024-11-22 19:04:46.802 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 63.7046ms
2024-11-22 19:04:47.384 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:04:47.403 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:04:47.405 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:04:47.424 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:04:47.437 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:04:47.754 +02:00 [INF] Executed DbCommand (177ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:04:47.869 +02:00 [INF] Executed DbCommand (102ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:04:47.946 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 19:04:47.975 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 19:04:47.979 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 19:04:48.049 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 70.5601ms.
2024-11-22 19:04:48.050 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 633.9269ms
2024-11-22 19:04:48.051 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:04:48.051 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 667.2238ms
2024-11-22 19:04:48.112 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:04:48.117 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:04:48.124 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 11.5267ms
2024-11-22 19:04:48.187 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 69.3712ms
2024-11-22 19:05:40.872 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:05:40.880 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:05:40.881 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:05:40.883 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:05:40.885 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:05:40.894 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:05:40.900 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:05:40.907 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 19:05:40.912 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 19:05:40.913 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 19:05:40.916 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 2.1504ms.
2024-11-22 19:05:40.916 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 34.7425ms
2024-11-22 19:05:40.917 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:05:40.918 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 46.3742ms
2024-11-22 19:05:40.937 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:05:40.938 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:05:40.942 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 4.2084ms
2024-11-22 19:05:40.944 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.5319ms
2024-11-22 19:10:00.331 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 19:10:00.540 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 19:10:00.541 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 19:10:00.544 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 19:10:00.546 +02:00 [INF] Hosting environment: Development
2024-11-22 19:10:00.547 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 19:10:01.100 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:10:01.771 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:10:01.790 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:10:01.815 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:10:01.823 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:10:01.837 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:10:01.838 +02:00 [ERR] User not logged in.
2024-11-22 19:10:01.855 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 19:10:01.858 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 62.7173ms
2024-11-22 19:10:01.863 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:10:01.870 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 302 0 null 771.703ms
2024-11-22 19:10:01.896 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 19:10:01.925 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:10:01.930 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 19:10:03.282 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 19:10:03.880 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 19:10:03.955 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:10:03.957 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 19:10:03.961 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 19:10:03.964 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 2032.7721ms
2024-11-22 19:10:03.966 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:10:03.972 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:793b3b44-fa77-0d34-aacf-be195e36aef4
2024-11-22 19:10:03.978 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 2081.858ms
2024-11-22 19:10:03.980 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 19:10:03.987 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:10:03.989 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:10:03.992 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 19:10:03.994 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 2.2631ms
2024-11-22 19:10:03.995 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:10:03.996 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 16.6671ms
2024-11-22 19:10:04.003 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 19:10:04.007 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:10:04.011 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:10:04.114 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:10:04.225 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 19:10:04.309 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:10:04.529 +02:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 19:10:04.574 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:10:04.589 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:10:04.607 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:10:04.621 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 19:10:04.750 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 136.0103ms.
2024-11-22 19:10:04.753 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 740.9908ms
2024-11-22 19:10:04.755 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:10:04.758 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 754.9655ms
2024-11-22 19:10:04.972 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:10:04.974 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:10:04.980 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 7.893ms
2024-11-22 19:10:05.022 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 47.9589ms
2024-11-22 19:10:05.195 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 19:10:05.202 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 19:10:05.213 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 19:10:05.214 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 18.9335ms
2024-11-22 19:10:05.264 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=iUn2YRGeVWN_e3_xzd2QnA - null null
2024-11-22 19:10:05.272 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 19:10:05.429 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: bAiXAWYVFsuITk8Na4o94w
2024-11-22 19:10:05.434 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: bAiXAWYVFsuITk8Na4o94w
2024-11-22 19:10:06.847 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 19:10:06.857 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:10:06.861 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:10:06.864 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:10:06.869 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:10:06.872 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 19:10:06.887 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 16.0341ms.
2024-11-22 19:10:06.888 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 26.1195ms
2024-11-22 19:10:06.889 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:10:06.891 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 43.5216ms
2024-11-22 19:10:06.912 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: bAiXAWYVFsuITk8Na4o94w
2024-11-22 19:10:06.913 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: bAiXAWYVFsuITk8Na4o94w
2024-11-22 19:10:06.920 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 19:10:06.921 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=iUn2YRGeVWN_e3_xzd2QnA - 200 null null 1657.4097ms
2024-11-22 19:10:06.930 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:10:06.936 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 5.5567ms
2024-11-22 19:10:06.938 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:10:06.975 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.1962ms
2024-11-22 19:10:07.837 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:10:07.845 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:10:07.847 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:10:07.855 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:10:07.859 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:10:07.941 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:10:07.968 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:10:08.027 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 19:10:08.057 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 19:10:08.061 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 19:10:08.116 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 55.9682ms.
2024-11-22 19:10:08.119 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 269.0665ms
2024-11-22 19:10:08.122 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:10:08.123 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 286.1488ms
2024-11-22 19:10:08.178 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:10:08.179 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:10:08.185 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 6.1361ms
2024-11-22 19:10:08.192 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 13.5129ms
2024-11-22 19:12:26.622 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 19:12:26.854 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 19:12:26.855 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 19:12:26.859 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 19:12:26.861 +02:00 [INF] Hosting environment: Development
2024-11-22 19:12:26.862 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 19:12:27.384 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:12:28.000 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:12:28.016 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:12:28.039 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:12:28.045 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:12:28.058 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:12:28.059 +02:00 [ERR] User not logged in.
2024-11-22 19:12:28.071 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 19:12:28.075 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 54.485ms
2024-11-22 19:12:28.079 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:12:28.084 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 302 0 null 701.2833ms
2024-11-22 19:12:28.091 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 19:12:28.109 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:12:28.114 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 19:12:29.549 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 19:12:30.100 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 19:12:30.178 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:12:30.180 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 19:12:30.186 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 19:12:30.189 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 2073.572ms
2024-11-22 19:12:30.191 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:12:30.194 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:e724614c-3970-a387-46ec-be2cf5c65b74
2024-11-22 19:12:30.201 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 2109.5718ms
2024-11-22 19:12:30.202 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 19:12:30.209 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:12:30.211 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:12:30.214 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 19:12:30.215 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 2.7987ms
2024-11-22 19:12:30.216 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:12:30.217 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 14.8347ms
2024-11-22 19:12:30.221 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 19:12:30.225 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:12:30.228 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:12:30.319 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:12:30.409 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 19:12:30.471 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:12:30.654 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 19:12:30.683 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:12:30.693 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:12:30.704 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:12:30.711 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 19:12:30.811 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 102.3331ms.
2024-11-22 19:12:30.813 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 583.7976ms
2024-11-22 19:12:30.816 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:12:30.819 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 597.9783ms
2024-11-22 19:12:30.862 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:12:30.864 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:12:30.871 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 9.4225ms
2024-11-22 19:12:30.910 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.9246ms
2024-11-22 19:12:30.942 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 19:12:30.946 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 19:12:30.959 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 19:12:30.960 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 18.2063ms
2024-11-22 19:12:31.031 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=AV-6rBYTeF0URe47kGfQ0g - null null
2024-11-22 19:12:31.034 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 19:12:31.095 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: w6HoRxwtBuBi2Y3H4dzKrg
2024-11-22 19:12:31.098 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: w6HoRxwtBuBi2Y3H4dzKrg
2024-11-22 19:12:32.553 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 19:12:32.561 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:12:32.565 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:12:32.571 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:12:32.575 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:12:32.577 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 19:12:32.591 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 14.0195ms.
2024-11-22 19:12:32.592 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 24.4077ms
2024-11-22 19:12:32.593 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:12:32.594 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 41.3847ms
2024-11-22 19:12:32.607 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: w6HoRxwtBuBi2Y3H4dzKrg
2024-11-22 19:12:32.608 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: w6HoRxwtBuBi2Y3H4dzKrg
2024-11-22 19:12:32.612 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 19:12:32.614 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=AV-6rBYTeF0URe47kGfQ0g - 200 null null 1582.391ms
2024-11-22 19:12:32.625 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:12:32.628 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:12:32.629 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 3.9763ms
2024-11-22 19:12:32.644 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 16.1095ms
2024-11-22 19:12:33.443 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:12:33.448 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:12:33.448 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:12:33.454 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:12:33.457 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:12:33.520 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:12:33.559 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:12:33.648 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 19:12:33.667 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 19:12:33.671 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 19:12:33.751 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 80.2128ms.
2024-11-22 19:12:33.753 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 303.4511ms
2024-11-22 19:12:33.754 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:12:33.756 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 312.1652ms
2024-11-22 19:12:33.786 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:12:33.787 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:12:33.793 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 6.163ms
2024-11-22 19:12:33.793 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.6792ms
2024-11-22 19:13:27.633 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 19:13:28.019 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 19:13:28.021 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 19:13:28.024 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 19:13:28.025 +02:00 [INF] Hosting environment: Development
2024-11-22 19:13:28.025 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 19:13:28.242 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:13:28.776 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:13:28.798 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:13:28.823 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:13:28.829 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:13:28.839 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:13:28.841 +02:00 [ERR] User not logged in.
2024-11-22 19:13:28.860 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 19:13:28.867 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 63.7564ms
2024-11-22 19:13:28.872 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:13:28.878 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 302 0 null 636.9188ms
2024-11-22 19:13:28.897 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 19:13:28.922 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:13:28.927 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 19:13:30.546 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 19:13:31.022 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 19:13:31.092 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:13:31.096 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 19:13:31.099 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 19:13:31.100 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 2171.9637ms
2024-11-22 19:13:31.101 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:13:31.104 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:ec35ffc4-073e-f00d-7140-de006f992d9b
2024-11-22 19:13:31.108 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 2211.7229ms
2024-11-22 19:13:31.111 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 19:13:31.118 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:13:31.120 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:13:31.122 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 19:13:31.123 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 1.8982ms
2024-11-22 19:13:31.124 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:13:31.125 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 14.0208ms
2024-11-22 19:13:31.129 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 19:13:31.133 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:13:31.136 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:13:31.222 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:13:31.326 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 19:13:31.399 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:13:31.610 +02:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 19:13:31.636 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:13:31.645 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:13:31.659 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:13:31.666 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 19:13:31.744 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 80.826ms.
2024-11-22 19:13:31.747 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 610.0648ms
2024-11-22 19:13:31.749 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:13:31.752 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 623.0134ms
2024-11-22 19:13:31.786 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:13:31.788 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:13:31.800 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 13.9851ms
2024-11-22 19:13:31.828 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.5432ms
2024-11-22 19:13:31.842 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 19:13:31.848 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 19:13:31.858 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 19:13:31.859 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 17.3226ms
2024-11-22 19:13:31.913 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=NnDThrDr8A35c8kIbbt0kg - null null
2024-11-22 19:13:31.917 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 19:13:31.972 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: HGog36zQStWrXzNCPmN6Rg
2024-11-22 19:13:31.974 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: HGog36zQStWrXzNCPmN6Rg
2024-11-22 19:13:41.478 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 19:13:41.486 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:13:41.487 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:13:41.548 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:13:41.558 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 19:13:41.572 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:13:41.609 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 19:13:41.638 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:13:41.644 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:13:41.651 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:13:41.653 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 19:13:41.658 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 4.8737ms.
2024-11-22 19:13:41.659 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 170.7375ms
2024-11-22 19:13:41.660 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:13:41.661 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 183.3906ms
2024-11-22 19:13:41.674 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: HGog36zQStWrXzNCPmN6Rg
2024-11-22 19:13:41.676 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: HGog36zQStWrXzNCPmN6Rg
2024-11-22 19:13:41.683 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 19:13:41.684 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:13:41.684 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=NnDThrDr8A35c8kIbbt0kg - 200 null null 9771.4086ms
2024-11-22 19:13:41.687 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 3.6223ms
2024-11-22 19:13:41.689 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:13:41.713 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.2027ms
2024-11-22 19:13:41.717 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 19:13:41.721 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 19:13:41.722 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 19:13:41.723 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 6.6389ms
2024-11-22 19:13:41.734 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=QPuplV4FQogc3JmrQwnycg - null null
2024-11-22 19:13:41.738 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 19:13:41.776 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: x3xRVgAw5bgn7-tvYn9BOQ
2024-11-22 19:13:41.778 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: x3xRVgAw5bgn7-tvYn9BOQ
2024-11-22 19:14:02.224 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 19:14:02.233 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:14:02.234 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:14:02.243 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:14:02.255 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 19:14:02.270 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:14:02.321 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 19:14:02.340 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:14:02.345 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:14:02.349 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:14:02.351 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 19:14:02.354 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 3.7543ms.
2024-11-22 19:14:02.355 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 119.0949ms
2024-11-22 19:14:02.356 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:14:02.357 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 133.1769ms
2024-11-22 19:14:02.361 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: x3xRVgAw5bgn7-tvYn9BOQ
2024-11-22 19:14:02.363 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: x3xRVgAw5bgn7-tvYn9BOQ
2024-11-22 19:14:02.364 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 19:14:02.364 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=QPuplV4FQogc3JmrQwnycg - 200 null null 20630.7709ms
2024-11-22 19:14:02.379 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:14:02.380 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:14:02.382 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 3.3431ms
2024-11-22 19:14:02.387 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.5483ms
2024-11-22 19:14:02.419 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 19:14:02.423 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 19:14:02.424 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 19:14:02.425 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 5.4822ms
2024-11-22 19:14:02.437 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=yry9AYyYLzSzi0VuPEUDug - null null
2024-11-22 19:14:02.440 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 19:14:02.476 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: -zInUGuzT6lEycCwJMlhQA
2024-11-22 19:14:02.477 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: -zInUGuzT6lEycCwJMlhQA
2024-11-22 19:14:08.868 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 19:14:08.879 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:14:08.883 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:14:08.886 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:14:08.890 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:14:08.893 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 19:14:08.905 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 13.401ms.
2024-11-22 19:14:08.906 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 21.7793ms
2024-11-22 19:14:08.907 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:14:08.907 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 39.5056ms
2024-11-22 19:14:08.919 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: -zInUGuzT6lEycCwJMlhQA
2024-11-22 19:14:08.920 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: -zInUGuzT6lEycCwJMlhQA
2024-11-22 19:14:08.921 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 19:14:08.921 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=yry9AYyYLzSzi0VuPEUDug - 200 null null 6484.6554ms
2024-11-22 19:14:08.956 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:14:08.956 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:14:08.959 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 2.6299ms
2024-11-22 19:14:08.969 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 12.8332ms
2024-11-22 19:14:10.059 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:14:10.066 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:14:10.067 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:14:10.073 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:14:10.078 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:14:10.095 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:14:10.109 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:14:10.176 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 19:14:10.207 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 19:14:10.213 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 19:14:10.276 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 64.7491ms.
2024-11-22 19:14:10.277 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 208.8935ms
2024-11-22 19:14:10.279 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:14:10.281 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 222.3071ms
2024-11-22 19:14:10.352 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:14:10.352 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:14:10.359 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 5.9119ms
2024-11-22 19:14:10.366 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 14.0179ms
2024-11-22 19:14:14.501 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/StaffQuery/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 21
2024-11-22 19:14:14.506 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:14:14.521 +02:00 [INF] Route matched with {action = "ReAssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReAssignQuery(Int32, Int32) on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:14:14.525 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:14:14.528 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:14:14.552 +02:00 [INF] ReAssignQuery hit!!!2
2024-11-22 19:14:14.553 +02:00 [INF] found firebaseId for user  hit!!!8gmggRNCMUaYTwAThlXahoTs8W12
2024-11-22 19:14:14.558 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:14:14.562 +02:00 [INF] found current staff for user  hit!!!Apptivate_UQMS_WebApp.Models.Account+StaffDetail
2024-11-22 19:14:14.574 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_queryId_0='0' (Nullable = true), @__currentStaff_StaffID_1='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID]
FROM [QueryAssignments] AS [q]
WHERE [q].[QueryID] = @__8__locals1_queryId_0 AND [q].[StaffID] = @__currentStaff_StaffID_1
2024-11-22 19:14:14.580 +02:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-11-22 19:14:14.604 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp) in 81.138ms
2024-11-22 19:14:14.606 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:14:14.608 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/StaffQuery/ReAssignQuery - 200 null application/json; charset=utf-8 106.5943ms
2024-11-22 19:21:59.399 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Apptivate_UQMS_WebApp.styles.css?v=qs5ueYQNnxdPY2nMnSxwZf003j75T8GJr2KVZR7pV-Q - null null
2024-11-22 19:21:59.720 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - null null
2024-11-22 19:21:59.811 +02:00 [INF] Sending file. Request path: '/Apptivate_UQMS_WebApp.styles.css'. Physical path: 'C:\Users\trent\source\repos\Apptivate_UQMS\obj\Debug\net8.0\scopedcss\bundle\Apptivate_UQMS_WebApp.styles.css'
2024-11-22 19:21:59.823 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Apptivate_UQMS_WebApp.styles.css?v=qs5ueYQNnxdPY2nMnSxwZf003j75T8GJr2KVZR7pV-Q - 200 3256 text/css 428.654ms
2024-11-22 19:21:59.984 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/lib/bootstrap/dist/css/bootstrap.min.css.map - null null
2024-11-22 19:22:00.880 +02:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css.map'. Physical path: 'C:\Users\trent\source\repos\Apptivate_UQMS\wwwroot\lib\bootstrap\dist\css\bootstrap.min.css.map'
2024-11-22 19:22:00.882 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/lib/bootstrap/dist/css/bootstrap.min.css.map - 200 449111 text/plain 897.6505ms
2024-11-22 19:22:00.937 +02:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'. Physical path: 'C:\Users\trent\source\repos\Apptivate_UQMS\wwwroot\lib\bootstrap\dist\js\bootstrap.bundle.min.js.map'
2024-11-22 19:22:00.939 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - 200 327261 text/plain 1218.9732ms
2024-11-22 19:22:25.709 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 19:22:25.943 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 19:22:25.944 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 19:22:25.952 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 19:22:25.955 +02:00 [INF] Hosting environment: Development
2024-11-22 19:22:25.956 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 19:22:26.457 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:22:27.109 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:22:27.123 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:22:27.144 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:22:27.148 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:22:27.159 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:22:27.160 +02:00 [ERR] User not logged in.
2024-11-22 19:22:27.175 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 19:22:27.180 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 51.3886ms
2024-11-22 19:22:27.187 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:22:27.193 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 302 0 null 738.5528ms
2024-11-22 19:22:27.213 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 19:22:27.232 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:22:27.238 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 19:22:29.326 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 19:22:31.026 +02:00 [INF] Executed DbCommand (116ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 19:22:31.186 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:22:31.189 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 19:22:31.195 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 19:22:31.233 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 3993.3033ms
2024-11-22 19:22:31.243 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:22:31.252 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:8b01da8d-bf62-2391-26c4-d6d448ef7125
2024-11-22 19:22:31.265 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 4051.6395ms
2024-11-22 19:22:31.270 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 19:22:31.286 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:22:31.291 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:22:31.294 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 19:22:31.295 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 2.9219ms
2024-11-22 19:22:31.297 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:22:31.298 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 28.1916ms
2024-11-22 19:22:31.307 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 19:22:31.320 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:22:31.327 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:22:31.581 +02:00 [INF] Executed DbCommand (66ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:22:31.874 +02:00 [INF] Executed DbCommand (112ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 19:22:32.159 +02:00 [INF] Executed DbCommand (184ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:22:32.809 +02:00 [INF] Executed DbCommand (273ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 19:22:32.891 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:22:32.916 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:22:32.962 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:22:32.980 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 19:22:33.209 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 235.7517ms.
2024-11-22 19:22:33.214 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 1883.1095ms
2024-11-22 19:22:33.218 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:22:33.226 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 1918.7444ms
2024-11-22 19:22:33.461 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:22:33.471 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 10.5392ms
2024-11-22 19:22:33.488 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:22:33.629 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 140.9237ms
2024-11-22 19:22:34.191 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 19:22:34.215 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 19:22:34.245 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 19:22:34.249 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 57.4387ms
2024-11-22 19:22:34.354 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=wiymrIqsg38TYB-1FiM6hA - null null
2024-11-22 19:22:34.365 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 19:22:34.868 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: 2kcYaw1KA8A6mNRwxnYmGw
2024-11-22 19:22:34.927 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: 2kcYaw1KA8A6mNRwxnYmGw
2024-11-22 19:22:35.912 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 19:22:36.001 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:22:36.012 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:22:36.021 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:22:36.033 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:22:36.053 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 19:22:36.081 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 29.8138ms.
2024-11-22 19:22:36.089 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 73.9329ms
2024-11-22 19:22:36.092 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:22:36.095 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 182.7359ms
2024-11-22 19:22:36.133 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: 2kcYaw1KA8A6mNRwxnYmGw
2024-11-22 19:22:36.192 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:22:36.192 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:22:36.323 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 129.4065ms
2024-11-22 19:22:36.193 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: 2kcYaw1KA8A6mNRwxnYmGw
2024-11-22 19:22:36.373 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 19:22:36.381 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=wiymrIqsg38TYB-1FiM6hA - 200 null null 2026.9962ms
2024-11-22 19:22:36.433 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 240.3664ms
2024-11-22 19:22:37.356 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:22:37.483 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:22:37.484 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:22:37.494 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:22:37.502 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:22:37.653 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:22:37.675 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:22:37.754 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 19:22:37.780 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 19:22:37.786 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 19:22:37.871 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 86.6861ms.
2024-11-22 19:22:37.874 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 386.8576ms
2024-11-22 19:22:37.876 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:22:37.877 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 521.0463ms
2024-11-22 19:22:37.921 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:22:37.925 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:22:37.931 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 6.6514ms
2024-11-22 19:22:37.940 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 18.5538ms
2024-11-22 19:24:55.229 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 19:24:55.476 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 19:24:55.478 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 19:24:55.482 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 19:24:55.485 +02:00 [INF] Hosting environment: Development
2024-11-22 19:24:55.486 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 19:24:55.856 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:24:57.561 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:24:57.588 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:24:57.633 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:24:57.644 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:24:57.669 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:24:57.671 +02:00 [ERR] User not logged in.
2024-11-22 19:24:57.719 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 19:24:57.727 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 131.239ms
2024-11-22 19:24:57.737 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:24:57.748 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 302 0 null 1894.0171ms
2024-11-22 19:24:57.787 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 19:24:57.837 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:24:57.852 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 19:25:00.256 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 19:25:02.287 +02:00 [INF] Executed DbCommand (95ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 19:25:02.495 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:25:02.499 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 19:25:02.509 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 19:25:02.511 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 4567.1979ms
2024-11-22 19:25:02.520 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:25:02.536 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:24130e53-adb7-2665-9cd2-3e9987d9dd87
2024-11-22 19:25:02.550 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 4762.944ms
2024-11-22 19:25:02.558 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 19:25:02.611 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:25:02.627 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:25:02.630 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 19:25:02.631 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 2.2671ms
2024-11-22 19:25:02.632 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:25:02.634 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 75.7114ms
2024-11-22 19:25:02.670 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 19:25:02.681 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:25:02.704 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:25:02.969 +02:00 [INF] Executed DbCommand (74ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:25:03.462 +02:00 [INF] Executed DbCommand (306ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 19:25:03.641 +02:00 [INF] Executed DbCommand (101ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:25:04.125 +02:00 [INF] Executed DbCommand (152ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 19:25:04.184 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:25:04.229 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:25:04.268 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:25:04.283 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 19:25:04.510 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 234.5252ms.
2024-11-22 19:25:04.514 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 1801.8094ms
2024-11-22 19:25:04.516 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:25:04.520 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 1849.2563ms
2024-11-22 19:25:05.028 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:25:05.028 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:25:05.052 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 23.7604ms
2024-11-22 19:25:05.148 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 119.7078ms
2024-11-22 19:25:05.503 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 19:25:05.514 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 19:25:05.534 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 19:25:05.536 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 33.7755ms
2024-11-22 19:25:05.593 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=bEw1OD4WvavlL0k4stTyqw - null null
2024-11-22 19:25:05.608 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 19:25:06.077 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: otDK3Yai8B4H2ZODkzBvzw
2024-11-22 19:25:06.079 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: otDK3Yai8B4H2ZODkzBvzw
2024-11-22 19:25:08.191 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 19:25:08.199 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:25:08.201 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:25:08.205 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 19:25:08.206 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 2.8664ms
2024-11-22 19:25:08.207 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:25:08.208 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 16.9288ms
2024-11-22 19:25:08.213 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 19:25:08.219 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:25:08.220 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:25:08.308 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:25:08.323 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 19:25:08.348 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:25:08.421 +02:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 19:25:08.452 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:25:08.459 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:25:08.465 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:25:08.468 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 19:25:08.473 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 4.9773ms.
2024-11-22 19:25:08.474 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 252.4723ms
2024-11-22 19:25:08.475 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:25:08.476 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 263.6184ms
2024-11-22 19:25:08.490 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: otDK3Yai8B4H2ZODkzBvzw
2024-11-22 19:25:08.492 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: otDK3Yai8B4H2ZODkzBvzw
2024-11-22 19:25:08.495 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 19:25:08.496 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=bEw1OD4WvavlL0k4stTyqw - 200 null null 2902.8071ms
2024-11-22 19:25:08.506 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:25:08.508 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:25:08.509 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 2.7651ms
2024-11-22 19:25:08.515 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.5054ms
2024-11-22 19:25:08.558 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 19:25:08.562 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 19:25:08.564 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 19:25:08.566 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 8.7077ms
2024-11-22 19:25:08.594 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=PQqMby8G4jAZf3vkEoERxQ - null null
2024-11-22 19:25:08.597 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 19:25:08.658 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: vUt4ZJRkYfwWOHTiUcQQcQ
2024-11-22 19:25:08.659 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: vUt4ZJRkYfwWOHTiUcQQcQ
2024-11-22 19:25:09.098 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 19:25:09.104 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:25:09.108 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:25:09.112 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:25:09.115 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:25:09.118 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 19:25:09.132 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 15.5445ms.
2024-11-22 19:25:09.134 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 24.4574ms
2024-11-22 19:25:09.135 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:25:09.137 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 38.6014ms
2024-11-22 19:25:09.143 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: vUt4ZJRkYfwWOHTiUcQQcQ
2024-11-22 19:25:09.144 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: vUt4ZJRkYfwWOHTiUcQQcQ
2024-11-22 19:25:09.146 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 19:25:09.148 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=PQqMby8G4jAZf3vkEoERxQ - 200 null null 553.9284ms
2024-11-22 19:25:09.181 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:25:09.181 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:25:09.184 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 2.2944ms
2024-11-22 19:25:09.192 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.6369ms
2024-11-22 19:25:09.921 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:25:09.925 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:25:09.926 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:25:09.931 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:25:09.936 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:25:09.951 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:25:09.963 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:25:10.018 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 19:25:10.043 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 19:25:10.048 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 19:25:10.108 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 60.0056ms.
2024-11-22 19:25:10.109 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 181.0875ms
2024-11-22 19:25:10.110 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:25:10.111 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 189.7561ms
2024-11-22 19:25:10.148 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:25:10.148 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:25:10.152 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 4.0094ms
2024-11-22 19:25:10.159 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.9321ms
2024-11-22 19:26:11.877 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:26:11.887 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:26:11.888 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:26:11.891 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:26:11.894 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:26:11.901 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:26:11.907 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:26:11.911 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 19:26:11.916 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 19:26:11.918 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 19:26:11.921 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 3.245ms.
2024-11-22 19:26:11.922 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 33.2185ms
2024-11-22 19:26:11.923 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:26:11.924 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 46.2325ms
2024-11-22 19:26:11.955 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/lib/bootstrap/dist/css/bootstrap.min.css - null null
2024-11-22 19:26:11.955 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/css/tempSidebar.css - null null
2024-11-22 19:26:11.955 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/css/site.css?v=jDyI1f6riKj4fnGtZytJN04bKOkAOtSQjUQukzomKFM - null null
2024-11-22 19:26:11.956 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Apptivate_UQMS_WebApp.styles.css?v=qs5ueYQNnxdPY2nMnSxwZf003j75T8GJr2KVZR7pV-Q - null null
2024-11-22 19:26:11.956 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/css/toast.css - null null
2024-11-22 19:26:11.959 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/images/menu-icon.png - null null
2024-11-22 19:26:11.960 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/svgs/home-1.svg - null null
2024-11-22 19:26:11.982 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/svgs/four-squares-button-of-view-options.svg - null null
2024-11-22 19:26:11.986 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/svgs/ticket.svg - null null
2024-11-22 19:26:11.986 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/svgs/chat-round-svgrepo-com (1).svg - null null
2024-11-22 19:26:11.991 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/lib/bootstrap/dist/js/bootstrap.bundle.min.js - null null
2024-11-22 19:26:11.992 +02:00 [INF] Sending file. Request path: '/images/menu-icon.png'. Physical path: 'C:\Users\trent\source\repos\Apptivate_UQMS\wwwroot\Images\menu-icon.png'
2024-11-22 19:26:11.992 +02:00 [INF] Sending file. Request path: '/css/site.css'. Physical path: 'C:\Users\trent\source\repos\Apptivate_UQMS\wwwroot\css\site.css'
2024-11-22 19:26:11.992 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/js/site.js?v=8ZRc1sGeVrPBx4lD717BgRaQekyh78QKV9SKsdt638U - null null
2024-11-22 19:26:11.992 +02:00 [INF] Sending file. Request path: '/Apptivate_UQMS_WebApp.styles.css'. Physical path: 'C:\Users\trent\source\repos\Apptivate_UQMS\obj\Debug\net8.0\scopedcss\bundle\Apptivate_UQMS_WebApp.styles.css'
2024-11-22 19:26:11.993 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/lib/jquery/dist/jquery.min.js - null null
2024-11-22 19:26:11.993 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/js/Sidebar.js?v=Qia1IPeDLSkb2Pa5EKSPN8fIRSPsZWHbBAaRE7PuMV0 - null null
2024-11-22 19:26:11.994 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:26:11.995 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Svgs/user-id-portrait-svgrepo-com (1).svg - null null
2024-11-22 19:26:11.996 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Svgs/logout.svg - null null
2024-11-22 19:26:11.999 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:26:12.007 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/images/menu-icon.png - 200 153 image/png 48.9403ms
2024-11-22 19:26:12.009 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/css/site.css?v=jDyI1f6riKj4fnGtZytJN04bKOkAOtSQjUQukzomKFM - 200 998 text/css 53.2195ms
2024-11-22 19:26:12.017 +02:00 [INF] Sending file. Request path: '/js/site.js'. Physical path: 'C:\Users\trent\source\repos\Apptivate_UQMS\wwwroot\js\site.js'
2024-11-22 19:26:12.021 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Apptivate_UQMS_WebApp.styles.css?v=qs5ueYQNnxdPY2nMnSxwZf003j75T8GJr2KVZR7pV-Q - 200 3256 text/css 64.9241ms
2024-11-22 19:26:12.027 +02:00 [INF] Sending file. Request path: '/js/Sidebar.js'. Physical path: 'C:\Users\trent\source\repos\Apptivate_UQMS\wwwroot\js\Sidebar.js'
2024-11-22 19:26:12.027 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 33.1101ms
2024-11-22 19:26:12.036 +02:00 [INF] Sending file. Request path: '/css/toast.css'. Physical path: 'C:\Users\trent\source\repos\Apptivate_UQMS\wwwroot\css\toast.css'
2024-11-22 19:26:12.054 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/js/site.js?v=8ZRc1sGeVrPBx4lD717BgRaQekyh78QKV9SKsdt638U - 200 3 text/javascript 62.7531ms
2024-11-22 19:26:12.057 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 58.4626ms
2024-11-22 19:26:12.059 +02:00 [INF] Sending file. Request path: '/css/tempSidebar.css'. Physical path: 'C:\Users\trent\source\repos\Apptivate_UQMS\wwwroot\css\tempSidebar.css'
2024-11-22 19:26:12.065 +02:00 [INF] Sending file. Request path: '/svgs/home-1.svg'. Physical path: 'C:\Users\trent\source\repos\Apptivate_UQMS\wwwroot\Svgs\home-1.svg'
2024-11-22 19:26:12.075 +02:00 [INF] Sending file. Request path: '/Svgs/logout.svg'. Physical path: 'C:\Users\trent\source\repos\Apptivate_UQMS\wwwroot\Svgs\logout.svg'
2024-11-22 19:26:12.077 +02:00 [INF] Sending file. Request path: '/Svgs/user-id-portrait-svgrepo-com (1).svg'. Physical path: 'C:\Users\trent\source\repos\Apptivate_UQMS\wwwroot\Svgs\user-id-portrait-svgrepo-com (1).svg'
2024-11-22 19:26:12.082 +02:00 [INF] Sending file. Request path: '/svgs/chat-round-svgrepo-com (1).svg'. Physical path: 'C:\Users\trent\source\repos\Apptivate_UQMS\wwwroot\Svgs\chat-round-svgrepo-com (1).svg'
2024-11-22 19:26:12.083 +02:00 [INF] Sending file. Request path: '/svgs/four-squares-button-of-view-options.svg'. Physical path: 'C:\Users\trent\source\repos\Apptivate_UQMS\wwwroot\Svgs\four-squares-button-of-view-options.svg'
2024-11-22 19:26:12.083 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/js/Sidebar.js?v=Qia1IPeDLSkb2Pa5EKSPN8fIRSPsZWHbBAaRE7PuMV0 - 200 1793 text/javascript 89.8668ms
2024-11-22 19:26:12.085 +02:00 [INF] Sending file. Request path: '/svgs/ticket.svg'. Physical path: 'C:\Users\trent\source\repos\Apptivate_UQMS\wwwroot\Svgs\ticket.svg'
2024-11-22 19:26:12.092 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/css/toast.css - 200 404 text/css 135.724ms
2024-11-22 19:26:12.099 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/css/tempSidebar.css - 200 4789 text/css 143.9471ms
2024-11-22 19:26:12.100 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/svgs/home-1.svg - 200 372 image/svg+xml 139.7566ms
2024-11-22 19:26:12.101 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Svgs/logout.svg - 200 746 image/svg+xml 105.2325ms
2024-11-22 19:26:12.102 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Svgs/user-id-portrait-svgrepo-com (1).svg - 200 1495 image/svg+xml 107.1522ms
2024-11-22 19:26:12.104 +02:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css'. Physical path: 'C:\Users\trent\source\repos\Apptivate_UQMS\wwwroot\lib\bootstrap\dist\css\bootstrap.min.css'
2024-11-22 19:26:12.105 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/svgs/chat-round-svgrepo-com (1).svg - 200 906 image/svg+xml 118.3934ms
2024-11-22 19:26:12.106 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/svgs/four-squares-button-of-view-options.svg - 200 5356 image/svg+xml 124.6161ms
2024-11-22 19:26:12.110 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/svgs/ticket.svg - 200 2079 image/svg+xml 123.4689ms
2024-11-22 19:26:12.121 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/lib/bootstrap/dist/css/bootstrap.min.css - 200 162726 text/css 165.5469ms
2024-11-22 19:26:12.131 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_content/Microsoft.AspNetCore.Components.QuickGrid/Microsoft.AspNetCore.Components.QuickGrid.bundle.scp.css - null null
2024-11-22 19:26:12.186 +02:00 [INF] Sending file. Request path: '/_content/Microsoft.AspNetCore.Components.QuickGrid/Microsoft.AspNetCore.Components.QuickGrid.bundle.scp.css'. Physical path: 'C:\Users\trent\.nuget\packages\microsoft.aspnetcore.components.quickgrid\8.0.8\staticwebassets\Microsoft.AspNetCore.Components.QuickGrid.bundle.scp.css'
2024-11-22 19:26:12.188 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_content/Microsoft.AspNetCore.Components.QuickGrid/Microsoft.AspNetCore.Components.QuickGrid.bundle.scp.css - 200 8251 text/css 57.327ms
2024-11-22 19:26:12.215 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Images/Apptivate_circle _logo.png - null null
2024-11-22 19:26:12.216 +02:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js'. Physical path: 'C:\Users\trent\source\repos\Apptivate_UQMS\wwwroot\lib\bootstrap\dist\js\bootstrap.bundle.min.js'
2024-11-22 19:26:12.223 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/lib/bootstrap/dist/js/bootstrap.bundle.min.js - 200 78474 text/javascript 231.5847ms
2024-11-22 19:26:12.227 +02:00 [INF] Sending file. Request path: '/Images/Apptivate_circle _logo.png'. Physical path: 'C:\Users\trent\source\repos\Apptivate_UQMS\wwwroot\Images\Apptivate_circle _logo.png'
2024-11-22 19:26:12.228 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Images/Apptivate_circle _logo.png - 200 33306 image/png 13.2618ms
2024-11-22 19:26:12.260 +02:00 [INF] Sending file. Request path: '/lib/jquery/dist/jquery.min.js'. Physical path: 'C:\Users\trent\source\repos\Apptivate_UQMS\wwwroot\lib\jquery\dist\jquery.min.js'
2024-11-22 19:26:12.261 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/lib/jquery/dist/jquery.min.js - 200 89503 text/javascript 268.1634ms
2024-11-22 19:26:12.548 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/favicon.ico - null null
2024-11-22 19:26:12.555 +02:00 [INF] Sending file. Request path: '/favicon.ico'. Physical path: 'C:\Users\trent\source\repos\Apptivate_UQMS\wwwroot\favicon.ico'
2024-11-22 19:26:12.556 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/favicon.ico - 200 5430 image/x-icon 7.5302ms
2024-11-22 19:26:59.877 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 19:26:59.985 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 19:26:59.988 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 19:26:59.992 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 19:26:59.992 +02:00 [INF] Hosting environment: Development
2024-11-22 19:26:59.993 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 19:27:00.537 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:27:00.804 +02:00 [INF] Firebase was not authenticated. Failure message: Firebase token validation failed: Firebase ID token expired at 1732296090. Expected to be greater than 1732296420.
2024-11-22 19:27:00.813 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Staff)
2024-11-22 19:27:00.815 +02:00 [INF] AuthenticationScheme: Firebase was challenged.
2024-11-22 19:27:00.819 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 401 0 null 283.0281ms
2024-11-22 19:27:11.723 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:27:11.835 +02:00 [INF] Firebase was not authenticated. Failure message: No token provided.
2024-11-22 19:27:11.839 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Staff)
2024-11-22 19:27:11.841 +02:00 [INF] AuthenticationScheme: Firebase was challenged.
2024-11-22 19:27:11.843 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 401 0 null 121.9918ms
2024-11-22 19:27:12.170 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:27:12.182 +02:00 [INF] Firebase was not authenticated. Failure message: No token provided.
2024-11-22 19:27:12.187 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Staff)
2024-11-22 19:27:12.188 +02:00 [INF] AuthenticationScheme: Firebase was challenged.
2024-11-22 19:27:12.189 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 401 0 null 18.727ms
2024-11-22 19:27:12.689 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:27:12.702 +02:00 [INF] Firebase was not authenticated. Failure message: No token provided.
2024-11-22 19:27:12.704 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Staff)
2024-11-22 19:27:12.707 +02:00 [INF] AuthenticationScheme: Firebase was challenged.
2024-11-22 19:27:12.708 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 401 0 null 18.8867ms
2024-11-22 19:27:12.926 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:27:12.939 +02:00 [INF] Firebase was not authenticated. Failure message: No token provided.
2024-11-22 19:27:12.946 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Staff)
2024-11-22 19:27:12.952 +02:00 [INF] AuthenticationScheme: Firebase was challenged.
2024-11-22 19:27:12.955 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 401 0 null 28.5213ms
2024-11-22 19:27:17.636 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/ - null null
2024-11-22 19:27:17.643 +02:00 [INF] Firebase was not authenticated. Failure message: Firebase token validation failed: Firebase ID token expired at 1732296090. Expected to be greater than 1732296437.
2024-11-22 19:27:17.650 +02:00 [INF] Firebase was not authenticated. Failure message: Firebase token validation failed: Firebase ID token expired at 1732296090. Expected to be greater than 1732296437.
2024-11-22 19:27:17.660 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.HomeController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:27:17.720 +02:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.HomeController (Apptivate_UQMS_WebApp).
2024-11-22 19:27:17.766 +02:00 [INF] Executing ViewResult, running view Index.
2024-11-22 19:27:18.036 +02:00 [INF] Executed ViewResult - view Index executed in 288.4236ms.
2024-11-22 19:27:18.042 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.HomeController.Index (Apptivate_UQMS_WebApp) in 314.0367ms
2024-11-22 19:27:18.043 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.HomeController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:27:18.045 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/ - 200 null text/html; charset=utf-8 409.3146ms
2024-11-22 19:27:18.158 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:27:18.161 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:27:18.180 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 22.1388ms
2024-11-22 19:27:18.225 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/css/background-image.jpg - null null
2024-11-22 19:27:18.234 +02:00 [INF] Firebase was not authenticated. Failure message: Firebase token validation failed: Firebase ID token expired at 1732296090. Expected to be greater than 1732296438.
2024-11-22 19:27:18.364 +02:00 [INF] Firebase was not authenticated. Failure message: Firebase token validation failed: Firebase ID token expired at 1732296090. Expected to be greater than 1732296438.
2024-11-22 19:27:18.365 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/css/background-image.jpg - 404 0 null 140.4193ms
2024-11-22 19:27:18.369 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7061/css/background-image.jpg, Response status code: 404
2024-11-22 19:27:18.752 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 591.0994ms
2024-11-22 19:27:21.637 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 19:27:21.641 +02:00 [INF] Firebase was not authenticated. Failure message: Firebase token validation failed: Firebase ID token expired at 1732296090. Expected to be greater than 1732296441.
2024-11-22 19:27:21.642 +02:00 [INF] Firebase was not authenticated. Failure message: Firebase token validation failed: Firebase ID token expired at 1732296090. Expected to be greater than 1732296441.
2024-11-22 19:27:21.643 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:27:21.648 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 19:27:21.653 +02:00 [ERR] Error during auto-login: Firebase ID token expired at 1732296090. Expected to be greater than 1732296441.
2024-11-22 19:27:21.655 +02:00 [INF] Executing ViewResult, running view Login.
2024-11-22 19:27:21.688 +02:00 [INF] Executed ViewResult - view Login executed in 33.8306ms.
2024-11-22 19:27:21.690 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 40.6123ms
2024-11-22 19:27:21.691 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:27:21.692 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 200 null text/html; charset=utf-8 54.1282ms
2024-11-22 19:27:21.718 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:27:21.720 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 2.2929ms
2024-11-22 19:27:21.722 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:27:21.729 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.465ms
2024-11-22 19:27:27.297 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Account/Login - application/x-www-form-urlencoded 225
2024-11-22 19:27:27.304 +02:00 [INF] Firebase was not authenticated. Failure message: Firebase token validation failed: Firebase ID token expired at 1732296090. Expected to be greater than 1732296447.
2024-11-22 19:27:27.305 +02:00 [INF] Firebase was not authenticated. Failure message: Firebase token validation failed: Firebase ID token expired at 1732296090. Expected to be greater than 1732296447.
2024-11-22 19:27:27.306 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:27:27.327 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginViewModel) on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 19:27:27.373 +02:00 [INF] Attempting to log in user with email: Daniel@gmail.com
2024-11-22 19:27:27.401 +02:00 [INF] Start processing HTTP request POST https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDXB0dEozyPQdXzlGyQFP1elMObEksarR0
2024-11-22 19:27:27.408 +02:00 [INF] Sending HTTP request POST https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDXB0dEozyPQdXzlGyQFP1elMObEksarR0
2024-11-22 19:27:27.962 +02:00 [INF] Received HTTP response headers after 548.3961ms - 200
2024-11-22 19:27:27.965 +02:00 [INF] End processing HTTP request after 566.9224ms - 200
2024-11-22 19:27:27.968 +02:00 [INF] User logged in successfully.
2024-11-22 19:27:30.157 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 19:27:31.714 +02:00 [INF] Executed DbCommand (85ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 19:27:32.094 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@p1='3', @p0='2024-11-22T17:27:31.8814382Z' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [LastSeen] = @p0
OUTPUT 1
WHERE [UserID] = @p1;
2024-11-22 19:27:32.114 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:27:32.115 +02:00 [INF] User Daniel@gmail.com logged in successfully.
2024-11-22 19:27:32.121 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 19:27:32.123 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 4793.9567ms
2024-11-22 19:27:32.123 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:27:32.125 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:d6669740-7643-009a-3599-55189885578b
2024-11-22 19:27:32.138 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Account/Login - 302 0 null 4841.1765ms
2024-11-22 19:27:32.138 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 19:27:32.451 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:27:32.457 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:27:32.652 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:27:32.840 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 19:27:32.947 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:27:33.296 +02:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 19:27:33.349 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:27:33.361 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:27:33.376 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:27:33.381 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 19:27:33.480 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 100.3329ms.
2024-11-22 19:27:33.493 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 1034.0866ms
2024-11-22 19:27:33.495 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:27:33.496 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 1358.0254ms
2024-11-22 19:27:33.524 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:27:33.527 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 3.2504ms
2024-11-22 19:27:33.536 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:27:33.549 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 13.6523ms
2024-11-22 19:27:33.654 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 19:27:33.658 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 19:27:33.667 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 19:27:33.668 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 13.5378ms
2024-11-22 19:27:33.686 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=OkxAhAokyONrvg7eKVSMzw - null null
2024-11-22 19:27:33.688 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 19:27:33.753 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: tLeg2RRrvZ1mbj7qContyg
2024-11-22 19:27:33.755 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: tLeg2RRrvZ1mbj7qContyg
2024-11-22 19:27:35.270 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 19:27:35.276 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:27:35.277 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:27:35.308 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:27:35.313 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:27:35.317 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 19:27:35.330 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 14.3379ms.
2024-11-22 19:27:35.332 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 52.4435ms
2024-11-22 19:27:35.333 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:27:35.334 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 63.4978ms
2024-11-22 19:27:35.344 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: tLeg2RRrvZ1mbj7qContyg
2024-11-22 19:27:35.344 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: tLeg2RRrvZ1mbj7qContyg
2024-11-22 19:27:35.350 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 19:27:35.350 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=OkxAhAokyONrvg7eKVSMzw - 200 null null 1664.7348ms
2024-11-22 19:27:35.359 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:27:35.359 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:27:35.361 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 1.8775ms
2024-11-22 19:27:35.368 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.6761ms
2024-11-22 19:27:36.140 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:27:36.145 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:27:36.149 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:27:36.154 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:27:36.157 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:27:36.247 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:27:36.259 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:27:36.312 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 19:27:36.331 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 19:27:36.336 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 19:27:36.389 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 53.5902ms.
2024-11-22 19:27:36.390 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 238.8139ms
2024-11-22 19:27:36.391 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:27:36.392 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 252.3147ms
2024-11-22 19:27:36.418 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:27:36.419 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 1.738ms
2024-11-22 19:27:36.418 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:27:36.427 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.0528ms
2024-11-22 19:29:04.742 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 19:29:04.957 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 19:29:04.958 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 19:29:04.964 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 19:29:04.965 +02:00 [INF] Hosting environment: Development
2024-11-22 19:29:04.966 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 19:29:05.314 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:29:05.936 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:29:05.954 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:29:05.981 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:29:05.986 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:29:06.000 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:29:06.000 +02:00 [ERR] User not logged in.
2024-11-22 19:29:06.015 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 19:29:06.018 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 59.0754ms
2024-11-22 19:29:06.022 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:29:06.029 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 302 0 null 715.1547ms
2024-11-22 19:29:06.044 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 19:29:06.059 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:29:06.066 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 19:29:07.499 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 19:29:08.108 +02:00 [INF] Executed DbCommand (52ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 19:29:08.191 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:29:08.194 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 19:29:08.197 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 19:29:08.198 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 2125.8376ms
2024-11-22 19:29:08.200 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:29:08.204 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:461ab966-cc6d-c59a-5b47-6cb37d264a15
2024-11-22 19:29:08.213 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 2168.7801ms
2024-11-22 19:29:08.217 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 19:29:08.225 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:29:08.229 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:29:08.232 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 19:29:08.233 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 1.7726ms
2024-11-22 19:29:08.234 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:29:08.235 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 17.9442ms
2024-11-22 19:29:08.241 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 19:29:08.247 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:29:08.251 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:29:08.358 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:29:08.460 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 19:29:08.555 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:29:08.799 +02:00 [INF] Executed DbCommand (92ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 19:29:08.828 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:29:08.842 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:29:08.859 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:29:08.868 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 19:29:08.971 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 107.0196ms.
2024-11-22 19:29:08.975 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 721.546ms
2024-11-22 19:29:08.975 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:29:08.977 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 736.6676ms
2024-11-22 19:29:09.145 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:29:09.147 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:29:09.156 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 10.7979ms
2024-11-22 19:29:09.198 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 51.2355ms
2024-11-22 19:29:09.293 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 19:29:09.297 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 19:29:09.305 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 19:29:09.306 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 13.2323ms
2024-11-22 19:29:09.356 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=rb-U9A9k_Xg7RmGIrfB9hA - null null
2024-11-22 19:29:09.359 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 19:29:09.478 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: UV-T9zEYgI4EPDehgC5XOQ
2024-11-22 19:29:09.480 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: UV-T9zEYgI4EPDehgC5XOQ
2024-11-22 19:29:10.893 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 19:29:10.900 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:29:10.903 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:29:10.907 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:29:10.910 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:29:10.913 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 19:29:10.925 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 13.4009ms.
2024-11-22 19:29:10.926 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 21.1672ms
2024-11-22 19:29:10.927 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:29:10.928 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 35.4138ms
2024-11-22 19:29:10.942 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: UV-T9zEYgI4EPDehgC5XOQ
2024-11-22 19:29:10.944 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: UV-T9zEYgI4EPDehgC5XOQ
2024-11-22 19:29:10.949 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 19:29:10.951 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=rb-U9A9k_Xg7RmGIrfB9hA - 200 null null 1594.7663ms
2024-11-22 19:29:10.967 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:29:10.967 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:29:10.969 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 2.663ms
2024-11-22 19:29:10.975 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.5761ms
2024-11-22 19:29:11.617 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:29:11.624 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:29:11.626 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:29:11.633 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:29:11.637 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:29:11.765 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:29:11.782 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:29:11.853 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 19:29:11.876 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 19:29:11.881 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 19:29:11.959 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 79.525ms.
2024-11-22 19:29:11.961 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 333.1776ms
2024-11-22 19:29:11.963 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:29:11.964 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 347.2579ms
2024-11-22 19:29:12.001 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:29:12.002 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:29:12.007 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 3.9752ms
2024-11-22 19:29:12.014 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 12.8349ms
2024-11-22 19:30:32.843 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 19:30:32.980 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 19:30:32.981 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 19:30:32.984 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 19:30:32.984 +02:00 [INF] Hosting environment: Development
2024-11-22 19:30:32.985 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 19:30:33.423 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:30:33.979 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:30:33.995 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:30:34.013 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:30:34.018 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:30:34.029 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:30:34.029 +02:00 [ERR] User not logged in.
2024-11-22 19:30:34.040 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 19:30:34.043 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 42.5757ms
2024-11-22 19:30:34.047 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:30:34.051 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 302 0 null 628.8449ms
2024-11-22 19:30:34.172 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 19:30:34.190 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:30:34.197 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 19:30:35.627 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 19:30:36.157 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 19:30:36.235 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:30:36.236 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 19:30:36.239 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 19:30:36.241 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 2042.1487ms
2024-11-22 19:30:36.241 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:30:36.245 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:462a063a-03fa-cbca-f595-68c33435b8c9
2024-11-22 19:30:36.251 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 2078.5205ms
2024-11-22 19:30:36.255 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 19:30:36.265 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:30:36.267 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:30:36.269 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 19:30:36.270 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 1.9885ms
2024-11-22 19:30:36.271 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:30:36.272 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 16.6626ms
2024-11-22 19:30:36.275 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 19:30:36.280 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:30:36.283 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:30:36.356 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:30:36.438 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 19:30:36.490 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:30:36.637 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 19:30:36.660 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:30:36.670 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:30:36.679 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:30:36.688 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 19:30:36.767 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 84.9284ms.
2024-11-22 19:30:36.771 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 487.4292ms
2024-11-22 19:30:36.772 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:30:36.774 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 498.7028ms
2024-11-22 19:30:36.835 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:30:36.840 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 4.6481ms
2024-11-22 19:30:36.858 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 19:30:36.861 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 19:30:36.868 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 19:30:36.870 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 11.7854ms
2024-11-22 19:30:36.940 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=r3t33PJW2_e__uSYBaEVQA - null null
2024-11-22 19:30:36.944 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 19:30:37.042 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:30:37.054 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: CaWB_EedOVcrUYMZyPKXFg
2024-11-22 19:30:37.056 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: CaWB_EedOVcrUYMZyPKXFg
2024-11-22 19:30:37.069 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.5184ms
2024-11-22 19:30:45.674 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 19:30:45.682 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:30:45.684 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:30:45.689 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:30:45.691 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:30:45.694 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 19:30:45.705 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 11.9244ms.
2024-11-22 19:30:45.706 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 19.3975ms
2024-11-22 19:30:45.707 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:30:45.708 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 33.6616ms
2024-11-22 19:30:45.720 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: CaWB_EedOVcrUYMZyPKXFg
2024-11-22 19:30:45.722 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: CaWB_EedOVcrUYMZyPKXFg
2024-11-22 19:30:45.727 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 19:30:45.729 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=r3t33PJW2_e__uSYBaEVQA - 200 null null 8788.7507ms
2024-11-22 19:30:45.732 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:30:45.732 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:30:45.734 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 2.3975ms
2024-11-22 19:30:45.758 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.9346ms
2024-11-22 19:30:46.307 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:30:46.312 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:30:46.314 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:30:46.318 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:30:46.321 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:30:46.424 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:30:46.439 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:30:46.481 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 19:30:46.494 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 19:30:46.497 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 19:30:46.544 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 47.3053ms.
2024-11-22 19:30:46.545 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 230.2395ms
2024-11-22 19:30:46.547 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:30:46.548 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 240.9097ms
2024-11-22 19:30:46.581 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:30:46.583 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 2.7206ms
2024-11-22 19:30:46.583 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:30:46.595 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 11.163ms
2024-11-22 19:31:18.927 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 19:31:19.032 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 19:31:19.032 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 19:31:19.036 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 19:31:19.037 +02:00 [INF] Hosting environment: Development
2024-11-22 19:31:19.037 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 19:31:19.499 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:31:19.976 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:31:19.987 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:31:20.007 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:31:20.013 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:31:20.019 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:31:20.021 +02:00 [ERR] User not logged in.
2024-11-22 19:31:20.033 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 19:31:20.038 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 45.515ms
2024-11-22 19:31:20.041 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:31:20.047 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 302 0 null 549.4779ms
2024-11-22 19:31:20.053 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 19:31:20.069 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:31:20.073 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 19:31:21.454 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 19:31:21.882 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 19:31:21.945 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:31:21.948 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 19:31:21.951 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 19:31:21.951 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 1877.581ms
2024-11-22 19:31:21.952 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:31:21.955 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:604340bb-0a13-fe3f-8537-9176fd98033a
2024-11-22 19:31:21.959 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 1905.9627ms
2024-11-22 19:31:21.962 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 19:31:21.968 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:31:21.970 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:31:21.972 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 19:31:21.972 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 1.348ms
2024-11-22 19:31:21.973 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:31:21.974 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 11.4613ms
2024-11-22 19:31:21.979 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 19:31:21.983 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:31:21.986 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:31:22.068 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:31:22.145 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 19:31:22.193 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:31:22.341 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 19:31:22.362 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:31:22.370 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:31:22.380 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:31:22.388 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 19:31:22.460 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 74.8199ms.
2024-11-22 19:31:22.462 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 475.0543ms
2024-11-22 19:31:22.465 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:31:22.467 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 487.8426ms
2024-11-22 19:31:22.485 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:31:22.489 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:31:22.497 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 11.7804ms
2024-11-22 19:31:22.534 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 19:31:22.535 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.2041ms
2024-11-22 19:31:22.540 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 19:31:22.550 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 19:31:22.552 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 17.8155ms
2024-11-22 19:31:22.606 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=gqPL58g85UK49ZwEb5PTaQ - null null
2024-11-22 19:31:22.609 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 19:31:22.667 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: GYGGQR53xEXET5L3DXUryQ
2024-11-22 19:31:22.669 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: GYGGQR53xEXET5L3DXUryQ
2024-11-22 19:31:24.486 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 19:31:24.494 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:31:24.496 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:31:24.500 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:31:24.506 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:31:24.509 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 19:31:24.519 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 12.2899ms.
2024-11-22 19:31:24.520 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 22.7765ms
2024-11-22 19:31:24.521 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:31:24.522 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 35.939ms
2024-11-22 19:31:24.536 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: GYGGQR53xEXET5L3DXUryQ
2024-11-22 19:31:24.538 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: GYGGQR53xEXET5L3DXUryQ
2024-11-22 19:31:24.543 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 19:31:24.545 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:31:24.545 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=gqPL58g85UK49ZwEb5PTaQ - 200 null null 1939.2657ms
2024-11-22 19:31:24.548 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 2.9544ms
2024-11-22 19:31:24.551 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:31:24.578 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.1024ms
2024-11-22 19:31:25.179 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:31:25.185 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:31:25.186 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:31:25.190 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:31:25.193 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:31:25.244 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:31:25.257 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:31:25.289 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 19:31:25.301 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 19:31:25.304 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 19:31:25.349 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 44.9877ms.
2024-11-22 19:31:25.350 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 162.4116ms
2024-11-22 19:31:25.351 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:31:25.351 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 172.6595ms
2024-11-22 19:31:25.373 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:31:25.375 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:31:25.378 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 2.4357ms
2024-11-22 19:31:25.380 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.1342ms
2024-11-22 19:32:01.600 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 19:32:01.702 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 19:32:01.705 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 19:32:01.709 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 19:32:01.710 +02:00 [INF] Hosting environment: Development
2024-11-22 19:32:01.710 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 19:32:01.899 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:32:02.439 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:32:02.451 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:32:02.471 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:32:02.474 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:32:02.482 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:32:02.483 +02:00 [ERR] User not logged in.
2024-11-22 19:32:02.497 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 19:32:02.500 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 45.6765ms
2024-11-22 19:32:02.503 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:32:02.507 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 302 0 null 609.1336ms
2024-11-22 19:32:02.515 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 19:32:02.529 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:32:02.533 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 19:32:04.374 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 19:32:04.929 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 19:32:04.998 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:32:05.000 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 19:32:05.003 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 19:32:05.004 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 2470.4497ms
2024-11-22 19:32:05.005 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:32:05.008 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:5c9f5c56-d5b3-a653-a369-09628c6d506d
2024-11-22 19:32:05.016 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 2500.962ms
2024-11-22 19:32:05.019 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 19:32:05.028 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:32:05.030 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:32:05.032 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 19:32:05.033 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 1.5927ms
2024-11-22 19:32:05.034 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:32:05.034 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 15.0815ms
2024-11-22 19:32:05.040 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 19:32:05.045 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:32:05.048 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:32:05.129 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:32:05.204 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 19:32:05.251 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:32:05.417 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 19:32:05.441 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:32:05.450 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:32:05.460 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:32:05.467 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 19:32:05.552 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 88.3255ms.
2024-11-22 19:32:05.555 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 505.9071ms
2024-11-22 19:32:05.556 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:32:05.561 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 521.84ms
2024-11-22 19:32:05.585 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:32:05.586 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:32:05.599 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 14.5124ms
2024-11-22 19:32:05.630 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.9058ms
2024-11-22 19:32:05.635 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 19:32:05.645 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 19:32:05.652 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 19:32:05.653 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 17.2309ms
2024-11-22 19:32:05.699 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=Sbvod4kLB1IG-pYLBWGUDQ - null null
2024-11-22 19:32:05.701 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 19:32:05.761 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: u3zWruSilKihUCEg2ZonUA
2024-11-22 19:32:05.763 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: u3zWruSilKihUCEg2ZonUA
2024-11-22 19:32:07.377 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 19:32:07.384 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:32:07.388 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:32:07.392 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:32:07.395 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:32:07.398 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 19:32:07.408 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 10.4857ms.
2024-11-22 19:32:07.409 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 20.0016ms
2024-11-22 19:32:07.410 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:32:07.412 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 34.8144ms
2024-11-22 19:32:07.425 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: u3zWruSilKihUCEg2ZonUA
2024-11-22 19:32:07.427 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: u3zWruSilKihUCEg2ZonUA
2024-11-22 19:32:07.432 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 19:32:07.433 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=Sbvod4kLB1IG-pYLBWGUDQ - 200 null null 1734.6786ms
2024-11-22 19:32:07.441 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:32:07.444 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 2.6535ms
2024-11-22 19:32:07.445 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:32:07.467 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 21.6871ms
2024-11-22 19:32:08.069 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:32:08.074 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:32:08.075 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:32:08.079 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:32:08.083 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:32:08.150 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:32:08.164 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:32:08.214 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 19:32:08.227 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 19:32:08.231 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 19:32:08.277 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 46.7039ms.
2024-11-22 19:32:08.278 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 202.1626ms
2024-11-22 19:32:08.279 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:32:08.280 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 211.4958ms
2024-11-22 19:32:08.308 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:32:08.309 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:32:08.312 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 2.3107ms
2024-11-22 19:32:08.317 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.7912ms
2024-11-22 19:45:53.347 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 19:45:53.533 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 19:45:53.535 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 19:45:53.538 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 19:45:53.539 +02:00 [INF] Hosting environment: Development
2024-11-22 19:45:53.539 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 19:45:54.218 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:45:54.863 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:45:54.881 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:45:54.904 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:45:54.908 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:45:54.921 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:45:54.922 +02:00 [ERR] User not logged in.
2024-11-22 19:45:54.938 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 19:45:54.946 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 56.1367ms
2024-11-22 19:45:54.952 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:45:54.959 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 302 0 null 742.2717ms
2024-11-22 19:45:54.981 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 19:45:54.999 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:45:55.004 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 19:45:56.688 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 19:45:57.408 +02:00 [INF] Executed DbCommand (98ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 19:45:57.484 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 19:45:57.487 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 19:45:57.491 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 19:45:57.493 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 2486.8446ms
2024-11-22 19:45:57.495 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 19:45:57.501 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:ad9a2370-692a-76da-e3ae-d425b856a249
2024-11-22 19:45:57.507 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 2525.5797ms
2024-11-22 19:45:57.511 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 19:45:57.520 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:45:57.522 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:45:57.525 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 19:45:57.527 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 2.7958ms
2024-11-22 19:45:57.528 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 19:45:57.529 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 17.9715ms
2024-11-22 19:45:57.534 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 19:45:57.538 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:45:57.543 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 19:45:57.664 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:45:57.783 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 19:45:57.890 +02:00 [INF] Executed DbCommand (70ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:45:58.108 +02:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 19:45:58.150 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:45:58.161 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:45:58.177 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 19:45:58.189 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 19:45:58.324 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 141.6086ms.
2024-11-22 19:45:58.327 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 782.2155ms
2024-11-22 19:45:58.329 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:45:58.332 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 798.1243ms
2024-11-22 19:45:58.485 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Apptivate_UQMS_WebApp.styles.css?v=qs5ueYQNnxdPY2nMnSxwZf003j75T8GJr2KVZR7pV-Q - null null
2024-11-22 19:45:58.497 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:45:58.497 +02:00 [INF] The file /Apptivate_UQMS_WebApp.styles.css was not modified
2024-11-22 19:45:58.502 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Apptivate_UQMS_WebApp.styles.css?v=qs5ueYQNnxdPY2nMnSxwZf003j75T8GJr2KVZR7pV-Q - 304 null text/css 16.4584ms
2024-11-22 19:45:58.506 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 9.6736ms
2024-11-22 19:45:58.510 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:45:58.548 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 37.4085ms
2024-11-22 19:45:58.654 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 19:45:58.660 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 19:45:58.674 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 19:45:58.677 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 23.5535ms
2024-11-22 19:45:59.050 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=JY7tKCU0q5QwgkkDKwDFsQ - null null
2024-11-22 19:45:59.060 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 19:45:59.536 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: qpPzWko36vhUL3ApvYqplA
2024-11-22 19:45:59.539 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: qpPzWko36vhUL3ApvYqplA
2024-11-22 19:46:02.185 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 19:46:02.204 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:46:02.211 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:46:02.219 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:46:02.227 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:46:02.235 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 19:46:02.261 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 31.6014ms.
2024-11-22 19:46:02.265 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 51.7695ms
2024-11-22 19:46:02.267 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 19:46:02.268 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 82.9988ms
2024-11-22 19:46:02.307 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: qpPzWko36vhUL3ApvYqplA
2024-11-22 19:46:02.318 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: qpPzWko36vhUL3ApvYqplA
2024-11-22 19:46:02.326 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:46:02.327 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:46:02.328 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 19:46:02.331 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 4.5498ms
2024-11-22 19:46:02.336 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=JY7tKCU0q5QwgkkDKwDFsQ - 200 null null 3286.7169ms
2024-11-22 19:46:02.352 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.2693ms
2024-11-22 19:46:03.041 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:46:03.063 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:46:03.071 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:46:03.081 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:46:03.090 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:46:03.259 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:46:03.293 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:46:03.382 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 19:46:03.422 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 19:46:03.430 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 19:46:03.512 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 82.4231ms.
2024-11-22 19:46:03.514 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 441.2987ms
2024-11-22 19:46:03.515 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:46:03.517 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 476.0177ms
2024-11-22 19:46:03.568 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:46:03.568 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:46:03.573 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 4.7827ms
2024-11-22 19:46:03.585 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 16.5077ms
2024-11-22 19:46:09.484 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/StaffQuery/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 24
2024-11-22 19:46:09.487 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:46:09.501 +02:00 [INF] Route matched with {action = "ReAssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReAssignQuery(Int32, Int32) on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:46:09.504 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:46:09.508 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:46:09.533 +02:00 [INF] ReAssignQuery hit!!!2
2024-11-22 19:46:09.534 +02:00 [INF] found firebaseId for user  hit!!!8gmggRNCMUaYTwAThlXahoTs8W12
2024-11-22 19:46:09.548 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:46:09.551 +02:00 [INF] found current staff for user  hit!!!Apptivate_UQMS_WebApp.Models.Account+StaffDetail
2024-11-22 19:46:09.566 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_queryId_0='106' (Nullable = true), @__currentStaff_StaffID_1='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID]
FROM [QueryAssignments] AS [q]
WHERE [q].[QueryID] = @__8__locals1_queryId_0 AND [q].[StaffID] = @__currentStaff_StaffID_1
2024-11-22 19:46:09.570 +02:00 [INF]  Query assignment  Apptivate_UQMS_WebApp.Models.QueryModel+QueryAssignment
2024-11-22 19:46:09.581 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_newStaffId_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching]
FROM [StaffDetails] AS [s]
WHERE [s].[StaffID] = @__8__locals1_newStaffId_0
2024-11-22 19:46:09.583 +02:00 [INF]  new staff   Apptivate_UQMS_WebApp.Models.Account+StaffDetail
2024-11-22 19:46:09.598 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_queryId_0='106'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[QueryID], [q].[CategoryID], [q].[CourseID], [q].[DepartmentID], [q].[Description], [q].[ModuleID], [q].[QueryTypeID], [q].[ResolvedDate], [q].[Status], [q].[StudentID], [q].[SubmissionDate], [q].[TicketNumber], [q].[Year]
FROM [Queries] AS [q]
WHERE [q].[QueryID] = @__8__locals1_queryId_0
2024-11-22 19:46:09.840 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[@p1='106', @p0='Reassigned' (Nullable = false) (Size = 4000), @p4='57', @p2='2024-11-22T19:46:09.5849249+02:00' (Nullable = true), @p3='2' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Queries] SET [Status] = @p0
OUTPUT 1
WHERE [QueryID] = @p1;
UPDATE [QueryAssignments] SET [AssignedDate] = @p2, [StaffID] = @p3
OUTPUT 1
WHERE [AssignmentID] = @p4;
2024-11-22 19:46:09.904 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__newStaffId_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[StaffID] = @__newStaffId_0
2024-11-22 19:46:09.911 +02:00 [INF] Attempting to send email to umar@gmail.com with subject 'Query Reassigned'
2024-11-22 19:46:09.953 +02:00 [ERR] Failed to send email to umar@gmail.com with subject 'Query Reassigned'
System.IO.InvalidDataException: email is a required property for SendSmtpEmailTo and cannot be null
   at sib_api_v3_sdk.Model.SendSmtpEmailTo..ctor(String email, String name)
   at Apptivate_UQMS_WebApp.Services.BrevoEmailService.SendEmailAsync(String to, String subject, String htmlContent) in C:\Users\trent\source\repos\Apptivate_UQMS\Services\BrevoEmailService.cs:line 42
2024-11-22 19:46:10.090 +02:00 [ERR] Error sending reassignment notifications for QueryID 106.
System.ApplicationException: Failed to send email
 ---> System.IO.InvalidDataException: email is a required property for SendSmtpEmailTo and cannot be null
   at sib_api_v3_sdk.Model.SendSmtpEmailTo..ctor(String email, String name)
   at Apptivate_UQMS_WebApp.Services.BrevoEmailService.SendEmailAsync(String to, String subject, String htmlContent) in C:\Users\trent\source\repos\Apptivate_UQMS\Services\BrevoEmailService.cs:line 42
   --- End of inner exception stack trace ---
   at Apptivate_UQMS_WebApp.Services.BrevoEmailService.SendEmailAsync(String to, String subject, String htmlContent) in C:\Users\trent\source\repos\Apptivate_UQMS\Services\BrevoEmailService.cs:line 64
   at Apptivate_UQMS_WebApp.Controllers.StaffQueryController.SendQueryReassignmentNotificationEmailStaff(Query query, Int32 newStaffId) in C:\Users\trent\source\repos\Apptivate_UQMS\Controllers\StaffController.cs:line 257
   at Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery(Int32 queryId, Int32 newStaffId) in C:\Users\trent\source\repos\Apptivate_UQMS\Controllers\StaffController.cs:line 224
2024-11-22 19:46:10.096 +02:00 [INF] Query 106 reassigned from staff 1 to staff 2.
2024-11-22 19:46:10.099 +02:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-11-22 19:46:10.120 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp) in 617.9045ms
2024-11-22 19:46:10.121 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:46:10.123 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/StaffQuery/ReAssignQuery - 200 null application/json; charset=utf-8 638.8956ms
2024-11-22 19:46:10.150 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 19:46:10.159 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:46:10.161 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 19:46:10.166 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:46:10.169 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 19:46:10.186 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 19:46:10.198 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 19:46:10.205 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 19:46:10.218 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 19:46:10.221 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 19:46:10.226 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 4.4054ms.
2024-11-22 19:46:10.227 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 64.6288ms
2024-11-22 19:46:10.228 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 19:46:10.230 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 80.0492ms
2024-11-22 19:46:10.259 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 19:46:10.264 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 19:46:10.266 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 2.4488ms
2024-11-22 19:46:10.269 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.8711ms
2024-11-22 20:06:51.696 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 20:06:52.220 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 20:06:52.223 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 20:06:52.230 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 20:06:52.232 +02:00 [INF] Hosting environment: Development
2024-11-22 20:06:52.233 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 20:06:52.745 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 20:06:54.268 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 20:06:54.305 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 20:06:54.360 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 20:06:54.388 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 20:06:54.392 +02:00 [ERR] User not logged in.
2024-11-22 20:06:54.422 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 20:06:54.429 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 117.357ms
2024-11-22 20:06:54.441 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 20:06:54.451 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 302 0 null 1713.5261ms
2024-11-22 20:06:54.492 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 20:06:54.523 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 20:06:54.532 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 20:06:56.823 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 20:06:58.908 +02:00 [INF] Executed DbCommand (170ms) [Parameters=[@__firebaseUser_Uid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 20:06:59.125 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 20:06:59.127 +02:00 [INF] Auto-login successful for user Daniel@gmail.com.
2024-11-22 20:06:59.137 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 20:06:59.139 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 4598.9331ms
2024-11-22 20:06:59.142 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 20:06:59.151 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:63494a8f-df4d-7843-823c-a77a7203cfb2
2024-11-22 20:06:59.162 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 4670.2857ms
2024-11-22 20:06:59.166 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 20:06:59.181 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 20:06:59.185 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 20:06:59.189 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 20:06:59.191 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 3.5839ms
2024-11-22 20:06:59.192 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 20:06:59.193 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 27.337ms
2024-11-22 20:06:59.199 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 20:06:59.205 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 20:06:59.218 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 20:06:59.440 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 20:06:59.651 +02:00 [INF] Executed DbCommand (60ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 20:06:59.995 +02:00 [INF] Executed DbCommand (258ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 20:07:00.894 +02:00 [INF] Executed DbCommand (578ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 20:07:00.970 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 20:07:01.022 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 20:07:01.053 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__user_UserID_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 20:07:01.094 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 20:07:01.341 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 256.1988ms.
2024-11-22 20:07:01.346 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 2125.899ms
2024-11-22 20:07:01.351 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 20:07:01.357 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 2158.4289ms
2024-11-22 20:07:02.031 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Apptivate_UQMS_WebApp.styles.css?v=qs5ueYQNnxdPY2nMnSxwZf003j75T8GJr2KVZR7pV-Q - null null
2024-11-22 20:07:02.043 +02:00 [INF] The file /Apptivate_UQMS_WebApp.styles.css was not modified
2024-11-22 20:07:02.045 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Apptivate_UQMS_WebApp.styles.css?v=qs5ueYQNnxdPY2nMnSxwZf003j75T8GJr2KVZR7pV-Q - 304 null text/css 13.4911ms
2024-11-22 20:07:02.170 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 20:07:02.178 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 7.2057ms
2024-11-22 20:07:02.254 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 20:07:02.294 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 20:07:02.311 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 20:07:02.320 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.8621ms
2024-11-22 20:07:02.333 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 20:07:02.336 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=1&negotiateVersion=1 - 200 316 application/json 42.0095ms
2024-11-22 20:07:02.433 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=Ls8GEleo46c5AeSvvZ-c6A - null null
2024-11-22 20:07:02.439 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 20:07:03.095 +02:00 [INF] Staff member with ID 1 is connecting. Connection ID: CI4K7hZHkjxRxT3Xc2MpoQ
2024-11-22 20:07:03.097 +02:00 [INF] Staff member with ID 1 connected and added to group. Connection ID: CI4K7hZHkjxRxT3Xc2MpoQ
2024-11-22 20:07:25.646 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - null null
2024-11-22 20:07:25.655 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 20:07:25.658 +02:00 [INF] Route matched with {action = "TicketDashboard", controller = "StaffQuery"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TicketDashboard() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 20:07:25.663 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 20:07:25.666 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/TicketDashboard.cshtml.
2024-11-22 20:07:25.679 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/TicketDashboard.cshtml executed in 14.1387ms.
2024-11-22 20:07:25.680 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp) in 20.4449ms
2024-11-22 20:07:25.681 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.TicketDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 20:07:25.681 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/TicketDashboard - 200 null text/html; charset=utf-8 35.9642ms
2024-11-22 20:07:25.699 +02:00 [INF] Staff member with ID 1 is disconnecting. Connection ID: CI4K7hZHkjxRxT3Xc2MpoQ
2024-11-22 20:07:25.701 +02:00 [INF] Staff member with ID 1 removed from group and connection removed. Connection ID: CI4K7hZHkjxRxT3Xc2MpoQ
2024-11-22 20:07:25.706 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 20:07:25.706 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=1&id=Ls8GEleo46c5AeSvvZ-c6A - 200 null null 23273.5978ms
2024-11-22 20:07:25.726 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 20:07:25.726 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 20:07:25.730 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 3.8196ms
2024-11-22 20:07:25.738 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 11.9698ms
2024-11-22 20:07:26.531 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 20:07:26.566 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 20:07:26.566 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 20:07:26.573 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 20:07:26.691 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 20:07:26.741 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 20:07:27.036 +02:00 [INF] Executed DbCommand (127ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 20:07:27.130 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 20:07:27.136 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 20:07:27.221 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 85.408ms.
2024-11-22 20:07:27.222 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 654.1517ms
2024-11-22 20:07:27.223 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 20:07:27.224 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 692.5693ms
2024-11-22 20:07:27.291 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 20:07:27.293 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 20:07:27.318 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 26.4627ms
2024-11-22 20:07:27.364 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 71.0337ms
2024-11-22 20:07:37.356 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/StaffQuery/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 20:07:37.359 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 20:07:37.371 +02:00 [INF] Route matched with {action = "ReAssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReAssignQuery(Int32, Int32) on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 20:07:37.375 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 20:07:37.395 +02:00 [INF] ReAssignQuery initiated with QueryID: 99 and NewStaffID: 5.
2024-11-22 20:07:37.410 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__8__locals1_firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__8__locals1_firebaseUid_0
2024-11-22 20:07:37.421 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_queryId_0='99' (Nullable = true), @__currentStaff_StaffID_1='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID]
FROM [QueryAssignments] AS [q]
WHERE [q].[QueryID] = @__8__locals1_queryId_0 AND [q].[StaffID] = @__currentStaff_StaffID_1
2024-11-22 20:07:37.428 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_newStaffId_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching]
FROM [StaffDetails] AS [s]
WHERE [s].[StaffID] = @__8__locals1_newStaffId_0
2024-11-22 20:07:37.438 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_queryId_0='99'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[QueryID], [q].[CategoryID], [q].[CourseID], [q].[DepartmentID], [q].[Description], [q].[ModuleID], [q].[QueryTypeID], [q].[ResolvedDate], [q].[Status], [q].[StudentID], [q].[SubmissionDate], [q].[TicketNumber], [q].[Year]
FROM [Queries] AS [q]
WHERE [q].[QueryID] = @__8__locals1_queryId_0
2024-11-22 20:07:37.607 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@p1='99', @p0='Reassigned' (Nullable = false) (Size = 4000), @p4='50', @p2='2024-11-22T20:07:37.4298332+02:00' (Nullable = true), @p3='5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Queries] SET [Status] = @p0
OUTPUT 1
WHERE [QueryID] = @p1;
UPDATE [QueryAssignments] SET [AssignedDate] = @p2, [StaffID] = @p3
OUTPUT 1
WHERE [AssignmentID] = @p4;
2024-11-22 20:07:37.631 +02:00 [INF] Attempting to send notification to staff ID: 5
2024-11-22 20:07:37.633 +02:00 [INF] Notification sent successfully to staff ID: 5
2024-11-22 20:07:37.786 +02:00 [INF] Executed DbCommand (147ms) [Parameters=[@__newStaffId_0='5'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[StaffID] = @__newStaffId_0
2024-11-22 20:07:37.789 +02:00 [INF] Attempting to send email to Khalil@gmail.com with subject 'Query Reassigned'
2024-11-22 20:07:37.791 +02:00 [ERR] Failed to send email to Khalil@gmail.com with subject 'Query Reassigned'
System.IO.InvalidDataException: email is a required property for SendSmtpEmailTo and cannot be null
   at sib_api_v3_sdk.Model.SendSmtpEmailTo..ctor(String email, String name)
   at Apptivate_UQMS_WebApp.Services.BrevoEmailService.SendEmailAsync(String to, String subject, String htmlContent) in C:\Users\trent\source\repos\Apptivate_UQMS\Services\BrevoEmailService.cs:line 42
2024-11-22 20:07:37.851 +02:00 [ERR] Error reassigning query 99.
System.ApplicationException: Failed to send email
 ---> System.IO.InvalidDataException: email is a required property for SendSmtpEmailTo and cannot be null
   at sib_api_v3_sdk.Model.SendSmtpEmailTo..ctor(String email, String name)
   at Apptivate_UQMS_WebApp.Services.BrevoEmailService.SendEmailAsync(String to, String subject, String htmlContent) in C:\Users\trent\source\repos\Apptivate_UQMS\Services\BrevoEmailService.cs:line 42
   --- End of inner exception stack trace ---
   at Apptivate_UQMS_WebApp.Services.BrevoEmailService.SendEmailAsync(String to, String subject, String htmlContent) in C:\Users\trent\source\repos\Apptivate_UQMS\Services\BrevoEmailService.cs:line 64
   at Apptivate_UQMS_WebApp.Services.QueryServices.AssignQueryService.SendQueryReassignmentNotificationEmailAsync(Query query, Int32 newStaffId) in C:\Users\trent\source\repos\Apptivate_UQMS\Services\QueryServices\AssignQueryService.cs:line 118
   at Apptivate_UQMS_WebApp.Services.QueryServices.AssignQueryService.ReassignQueryAsync(Int32 queryId, Int32 newStaffId, String firebaseUid) in C:\Users\trent\source\repos\Apptivate_UQMS\Services\QueryServices\AssignQueryService.cs:line 96
2024-11-22 20:07:37.856 +02:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-11-22 20:07:37.872 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp) in 499.6367ms
2024-11-22 20:07:37.873 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 20:07:37.874 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/StaffQuery/ReAssignQuery - 200 null application/json; charset=utf-8 517.9278ms
2024-11-22 20:08:07.347 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/StaffQuery/ReAssignQuery - application/x-www-form-urlencoded; charset=UTF-8 23
2024-11-22 20:08:07.351 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 20:08:07.352 +02:00 [INF] Route matched with {action = "ReAssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReAssignQuery(Int32, Int32) on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 20:08:07.355 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 20:08:07.357 +02:00 [INF] ReAssignQuery initiated with QueryID: 99 and NewStaffID: 5.
2024-11-22 20:08:07.367 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__8__locals1_firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__8__locals1_firebaseUid_0
2024-11-22 20:08:07.376 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_queryId_0='99' (Nullable = true), @__currentStaff_StaffID_1='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID]
FROM [QueryAssignments] AS [q]
WHERE [q].[QueryID] = @__8__locals1_queryId_0 AND [q].[StaffID] = @__currentStaff_StaffID_1
2024-11-22 20:08:07.377 +02:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-11-22 20:08:07.378 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp) in 24.0537ms
2024-11-22 20:08:07.378 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.ReAssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 20:08:07.379 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/StaffQuery/ReAssignQuery - 200 null application/json; charset=utf-8 31.4884ms
2024-11-22 20:08:14.412 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - null null
2024-11-22 20:08:14.419 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 20:08:14.419 +02:00 [INF] Route matched with {action = "AssignQuery", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignQuery() on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 20:08:14.422 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 20:08:14.426 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__firebaseUid_0='8gmggRNCMUaYTwAThlXahoTs8W12' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 20:08:14.432 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__staff_StaffID_0='1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q0].[QueryID], [q0].[Description], [q].[Priority], [q0].[SubmissionDate]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 20:08:14.435 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__currentUserId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [s].[UserID] = @__currentUserId_0
2024-11-22 20:08:14.445 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__currentUserDepartment_0='School of Information Technology' (Size = 4000), @__currentUserId_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [u].[Name] + N' ' + [u].[Surname] AS [StaffName], [p].[PositionName] AS [Position], [s].[Department]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[Department] = @__currentUserDepartment_0 AND [s].[UserID] <> @__currentUserId_1
2024-11-22 20:08:14.448 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/AssignQuery.cshtml.
2024-11-22 20:08:14.450 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/AssignQuery.cshtml executed in 2.6802ms.
2024-11-22 20:08:14.451 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp) in 30.7687ms
2024-11-22 20:08:14.453 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.AssignQuery (Apptivate_UQMS_WebApp)'
2024-11-22 20:08:14.455 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/AssignQuery - 200 null text/html; charset=utf-8 42.1891ms
2024-11-22 20:08:14.470 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 20:08:14.474 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 20:08:14.476 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.1647ms
2024-11-22 20:08:14.478 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 3.6087ms
2024-11-22 20:09:19.528 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Account/Logout - application/x-www-form-urlencoded 225
2024-11-22 20:09:19.539 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Logout (Apptivate_UQMS_WebApp)'
2024-11-22 20:09:19.542 +02:00 [INF] Route matched with {action = "Logout", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Logout() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 20:09:19.544 +02:00 [INF] User logged out.
2024-11-22 20:09:19.550 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 20:09:19.550 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Logout (Apptivate_UQMS_WebApp) in 7.6218ms
2024-11-22 20:09:19.551 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Logout (Apptivate_UQMS_WebApp)'
2024-11-22 20:09:19.552 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Account/Logout - 302 0 null 23.5221ms
2024-11-22 20:09:19.561 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 20:09:19.565 +02:00 [INF] Firebase was not authenticated. Failure message: No token provided.
2024-11-22 20:09:19.565 +02:00 [INF] Firebase was not authenticated. Failure message: No token provided.
2024-11-22 20:09:19.566 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 20:09:19.566 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 20:09:19.570 +02:00 [INF] Executing ViewResult, running view Login.
2024-11-22 20:09:19.585 +02:00 [INF] Executed ViewResult - view Login executed in 15.437ms.
2024-11-22 20:09:19.586 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 18.346ms
2024-11-22 20:09:19.586 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 20:09:19.588 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 200 null text/html; charset=utf-8 26.9307ms
2024-11-22 20:09:19.626 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 20:09:19.627 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 1.4681ms
2024-11-22 20:09:19.634 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 20:09:19.640 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.4025ms
2024-11-22 20:09:31.338 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Account/Login - application/x-www-form-urlencoded 225
2024-11-22 20:09:31.342 +02:00 [INF] Firebase was not authenticated. Failure message: No token provided.
2024-11-22 20:09:31.343 +02:00 [INF] Firebase was not authenticated. Failure message: No token provided.
2024-11-22 20:09:31.344 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 20:09:31.361 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginViewModel) on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 20:09:31.386 +02:00 [INF] Attempting to log in user with email: Khalil@gmail.com
2024-11-22 20:09:31.397 +02:00 [INF] Start processing HTTP request POST https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDXB0dEozyPQdXzlGyQFP1elMObEksarR0
2024-11-22 20:09:31.402 +02:00 [INF] Sending HTTP request POST https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDXB0dEozyPQdXzlGyQFP1elMObEksarR0
2024-11-22 20:09:31.955 +02:00 [INF] Received HTTP response headers after 547.6415ms - 400
2024-11-22 20:09:31.957 +02:00 [INF] End processing HTTP request after 561.5543ms - 400
2024-11-22 20:09:31.960 +02:00 [ERR] Failed to log in user with email: Khalil@gmail.com
System.Exception: An error occurred during login. Please try again.
   at Apptivate_UQMS_WebApp.Services.AccountServices.FirebaseAuthService.LoginUser(String email, String password) in C:\Users\trent\source\repos\Apptivate_UQMS\Services\AccountServices\FirebaseAuthService.cs:line 126
2024-11-22 20:09:31.962 +02:00 [ERR] Error occurred during login.
System.Exception: Your Email or password is incorrect. Please try again
   at Apptivate_UQMS_WebApp.Services.AccountServices.FirebaseAuthService.LoginUser(String email, String password) in C:\Users\trent\source\repos\Apptivate_UQMS\Services\AccountServices\FirebaseAuthService.cs:line 148
   at Apptivate_UQMS_WebApp.Controllers.AccountController.Login(LoginViewModel model) in C:\Users\trent\source\repos\Apptivate_UQMS\Controllers\AccountController.cs:line 223
2024-11-22 20:09:31.966 +02:00 [INF] Executing ViewResult, running view Login.
2024-11-22 20:09:31.969 +02:00 [INF] Executed ViewResult - view Login executed in 3.424ms.
2024-11-22 20:09:31.971 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 608.8725ms
2024-11-22 20:09:31.972 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 20:09:31.973 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Account/Login - 200 null text/html; charset=utf-8 634.6596ms
2024-11-22 20:09:32.001 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 20:09:32.002 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 20:09:32.004 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 3.0233ms
2024-11-22 20:09:32.008 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.6964ms
2024-11-22 20:09:42.284 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/Account/Login - application/x-www-form-urlencoded 225
2024-11-22 20:09:42.292 +02:00 [INF] Firebase was not authenticated. Failure message: No token provided.
2024-11-22 20:09:42.294 +02:00 [INF] Firebase was not authenticated. Failure message: No token provided.
2024-11-22 20:09:42.296 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 20:09:42.298 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginViewModel) on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 20:09:42.301 +02:00 [INF] Attempting to log in user with email: Khalil@gmail.com
2024-11-22 20:09:42.302 +02:00 [INF] Start processing HTTP request POST https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDXB0dEozyPQdXzlGyQFP1elMObEksarR0
2024-11-22 20:09:42.303 +02:00 [INF] Sending HTTP request POST https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDXB0dEozyPQdXzlGyQFP1elMObEksarR0
2024-11-22 20:09:42.732 +02:00 [INF] Received HTTP response headers after 428.9265ms - 200
2024-11-22 20:09:42.734 +02:00 [INF] End processing HTTP request after 431.8329ms - 200
2024-11-22 20:09:42.736 +02:00 [INF] User logged in successfully.
2024-11-22 20:09:43.314 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__firebaseUser_Uid_0='7IYQt6XtkobAlONS0ZKV1Bvnot72' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 20:09:43.323 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='14', @p0='2024-11-22T18:09:43.3164411Z' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [LastSeen] = @p0
OUTPUT 1
WHERE [UserID] = @p1;
2024-11-22 20:09:43.330 +02:00 [INF] User Khalil@gmail.com logged in successfully.
2024-11-22 20:09:43.331 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 20:09:43.332 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 1032.3854ms
2024-11-22 20:09:43.333 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 20:09:43.334 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/Account/Login - 302 0 null 1050.3342ms
2024-11-22 20:09:43.341 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 20:09:43.348 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 20:09:43.349 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 20:09:43.360 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__firebaseUid_0='7IYQt6XtkobAlONS0ZKV1Bvnot72' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 20:09:43.380 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__staff_StaffID_0='5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 20:09:43.420 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__staff_StaffID_0='5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 20:09:43.493 +02:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 20:09:43.524 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__firebaseUid_0='7IYQt6XtkobAlONS0ZKV1Bvnot72' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 20:09:43.529 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='14'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 20:09:43.538 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__user_UserID_0='14'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 20:09:43.540 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 20:09:43.551 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 10.5528ms.
2024-11-22 20:09:43.555 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 204.8586ms
2024-11-22 20:09:43.556 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 20:09:43.557 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 215.7658ms
2024-11-22 20:09:43.608 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 20:09:43.611 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 20:09:43.613 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 5.8715ms
2024-11-22 20:09:43.625 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 14.2258ms
2024-11-22 20:09:43.697 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=5&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 20:09:43.701 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 20:09:43.704 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 20:09:43.705 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=5&negotiateVersion=1 - 200 316 application/json 8.9203ms
2024-11-22 20:09:43.715 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=5&id=ASzWz7cvxvqPfPOxuMqwsw - null null
2024-11-22 20:09:43.718 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 20:09:43.765 +02:00 [INF] Staff member with ID 5 is connecting. Connection ID: qGoV6uPGG91KiqEgrpb9eA
2024-11-22 20:09:43.767 +02:00 [INF] Staff member with ID 5 connected and added to group. Connection ID: qGoV6uPGG91KiqEgrpb9eA
2024-11-22 20:09:59.240 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/StaffQuery/QueryDetails?queryId=99 - null null
2024-11-22 20:09:59.246 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.QueryDetails (Apptivate_UQMS_WebApp)'
2024-11-22 20:09:59.250 +02:00 [INF] Route matched with {action = "QueryDetails", controller = "StaffQuery"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] QueryDetails(Int32) on controller Apptivate_UQMS_WebApp.Controllers.StaffQueryController (Apptivate_UQMS_WebApp).
2024-11-22 20:09:59.254 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 20:09:59.257 +02:00 [INF] GetStudentQueryAsync called with queryId: 99
2024-11-22 20:09:59.262 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__firebaseUid_0='7IYQt6XtkobAlONS0ZKV1Bvnot72' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 20:09:59.322 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__queryId_0='99'], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[QueryID], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[StudentID0], [t].[UserID0], [t].[DepartmentID0], [t].[CourseID0], [q0].[DocumentID], [q0].[DocumentName], [q0].[DocumentPath], [q0].[QueryID], [q0].[UploadDate], [t].[Course], [t].[Department], [t].[UserID], [t].[Year0], [t].[studentNumber], [t].[ConnectionId], [t].[Email], [t].[FirebaseUID], [t].[IsOnline], [t].[LastSeen], [t].[Name], [t].[PasswordHash], [t].[PhoneNumber], [t].[RegistrationDate], [t].[Role], [t].[Surname], [t].[DepartmentName], [t].[CourseCode], [t].[CourseName]
FROM (
    SELECT TOP(1) [q].[QueryID], [q].[CategoryID], [q].[CourseID], [q].[DepartmentID], [q].[Description], [q].[ModuleID], [q].[QueryTypeID], [q].[ResolvedDate], [q].[Status], [q].[StudentID], [q].[SubmissionDate], [q].[TicketNumber], [q].[Year], [s].[StudentID] AS [StudentID0], [s].[Course], [s].[Department], [s].[UserID], [s].[Year] AS [Year0], [s].[studentNumber], [u].[UserID] AS [UserID0], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [d].[DepartmentID] AS [DepartmentID0], [d].[DepartmentName], [c].[CourseID] AS [CourseID0], [c].[CourseCode], [c].[CourseName]
    FROM [Queries] AS [q]
    INNER JOIN [StudentDetails] AS [s] ON [q].[StudentID] = [s].[StudentID]
    INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
    LEFT JOIN [Departments] AS [d] ON [q].[DepartmentID] = [d].[DepartmentID]
    LEFT JOIN [Courses] AS [c] ON [q].[CourseID] = [c].[CourseID]
    WHERE [q].[QueryID] = @__queryId_0
) AS [t]
LEFT JOIN [QueryDocuments] AS [q0] ON [t].[QueryID] = [q0].[QueryID]
ORDER BY [t].[QueryID], [t].[StudentID0], [t].[UserID0], [t].[DepartmentID0], [t].[CourseID0]
2024-11-22 20:09:59.352 +02:00 [INF] GetStaffAssignmentQueryDetails called with queryTypeId: 99
2024-11-22 20:09:59.353 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__firebaseUid_0='7IYQt6XtkobAlONS0ZKV1Bvnot72' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 20:09:59.359 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__firebaseUid_0='7IYQt6XtkobAlONS0ZKV1Bvnot72' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 20:09:59.376 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__staff_StaffID_0='5' (Nullable = true), @__queryId_1='99' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[AssignmentID]
FROM [QueryAssignments] AS [q]
WHERE [q].[StaffID] = @__staff_StaffID_0 AND [q].[QueryID] = @__queryId_1
2024-11-22 20:09:59.380 +02:00 [WRN] AssignmentID: 50
2024-11-22 20:09:59.381 +02:00 [WRN] QueryID: 99
2024-11-22 20:09:59.383 +02:00 [INF] Success !!!
2024-11-22 20:09:59.389 +02:00 [INF] Executing ViewResult, running view ~/Views/Query/StaffQuery/QueryDetails.cshtml.
2024-11-22 20:09:59.393 +02:00 [INF] Successfully initialized Google Cloud Storage client.
2024-11-22 20:09:59.465 +02:00 [INF] Attempting to generate signed URL for object: dd444cf0-4498-43e5-8e74-2ef4808be111_Broker CRD Card.png
2024-11-22 20:09:59.497 +02:00 [INF] Successfully generated signed URL for object: dd444cf0-4498-43e5-8e74-2ef4808be111_Broker CRD Card.png
2024-11-22 20:09:59.498 +02:00 [INF] SIGNED URL WEB https://storage.googleapis.com/uqms-a3d87.appspot.com/dd444cf0-4498-43e5-8e74-2ef4808be111_Broker%20CRD%20Card.png?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=firebase-adminsdk-666ea%40uqms-a3d87.iam.gserviceaccount.com%2F20241122%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20241122T180959Z&X-Goog-Expires=900&X-Goog-SignedHeaders=host&X-Goog-Signature=05aabb0e1262bddbc7351fbe5a16c309c6091fbedff8be1cde8e9f9e63e95ffffe251f68696b3475cd9728ea85595ab23dd0399cf96ac4abddb903a0a6a8276b3f4f6e6dc7b23da00d7beaab22920d50748a2a60cbd790e57cebb6048b78b807a8cca2cb118dfc5ea550c0e7e77194099e10439a458866db6bf9f01223b91ed2d1ff105f264fd45f4bc3d9c7d5fb8dc102474629d8b71f77b228b5a826fa9fab005af5ed9e6eb24f56b06fe8cfce0ef20d3d8c847b3fa0a1d587974d2afd9870137f4cc4420353ed61c2de93518af6811efa2e1d88920ff676a56635d94cd30e79ef658c70dcee49e3e5fee930372c9f040e742178d9aafcc6a7c2e85717e73e
2024-11-22 20:09:59.506 +02:00 [INF] Executed ViewResult - view ~/Views/Query/StaffQuery/QueryDetails.cshtml executed in 117.3679ms.
2024-11-22 20:09:59.507 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.StaffQueryController.QueryDetails (Apptivate_UQMS_WebApp) in 255.8424ms
2024-11-22 20:09:59.509 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.StaffQueryController.QueryDetails (Apptivate_UQMS_WebApp)'
2024-11-22 20:09:59.510 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/StaffQuery/QueryDetails?queryId=99 - 200 null text/html; charset=utf-8 270.5639ms
2024-11-22 20:09:59.513 +02:00 [INF] Staff member with ID 5 is disconnecting. Connection ID: qGoV6uPGG91KiqEgrpb9eA
2024-11-22 20:09:59.513 +02:00 [INF] Staff member with ID 5 removed from group and connection removed. Connection ID: qGoV6uPGG91KiqEgrpb9eA
2024-11-22 20:09:59.514 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 20:09:59.515 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=5&id=ASzWz7cvxvqPfPOxuMqwsw - 200 null null 15799.7429ms
2024-11-22 20:09:59.537 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/css/AssignedQueryDetails.css?v=3Dadah6tmLALO4aDJkoE2B2yuNWFWTe1BasA4Ayk3A8 - null null
2024-11-22 20:09:59.538 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 20:09:59.538 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 20:09:59.542 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 3.9699ms
2024-11-22 20:09:59.547 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.2274ms
2024-11-22 20:09:59.560 +02:00 [INF] Sending file. Request path: '/css/AssignedQueryDetails.css'. Physical path: 'C:\Users\trent\source\repos\Apptivate_UQMS\wwwroot\css\AssignedQueryDetails.css'
2024-11-22 20:09:59.562 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/css/AssignedQueryDetails.css?v=3Dadah6tmLALO4aDJkoE2B2yuNWFWTe1BasA4Ayk3A8 - 200 14940 text/css 24.2276ms
2024-11-22 20:10:17.835 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 20:10:17.841 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 20:10:17.843 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 20:10:17.851 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__firebaseUid_0='7IYQt6XtkobAlONS0ZKV1Bvnot72' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 20:10:17.863 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__staff_StaffID_0='5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 20:10:18.060 +02:00 [INF] Executed DbCommand (194ms) [Parameters=[@__staff_StaffID_0='5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 20:10:18.100 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 20:10:18.113 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__firebaseUid_0='7IYQt6XtkobAlONS0ZKV1Bvnot72' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 20:10:18.118 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='14'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 20:10:18.125 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_UserID_0='14'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 20:10:18.126 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 20:10:18.130 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 3.5174ms.
2024-11-22 20:10:18.131 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 286.4693ms
2024-11-22 20:10:18.133 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 20:10:18.135 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 300.0633ms
2024-11-22 20:10:18.162 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 20:10:18.166 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 4.3623ms
2024-11-22 20:10:18.216 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=5&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 20:10:18.221 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 20:10:18.223 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 20:10:18.223 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=5&negotiateVersion=1 - 200 316 application/json 7.385ms
2024-11-22 20:10:18.237 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=5&id=67Mo4bvgkxyC2oBAb0e4BQ - null null
2024-11-22 20:10:18.239 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 20:10:18.290 +02:00 [INF] Staff member with ID 5 is connecting. Connection ID: -s63AFYQeiCDILcm-dMQNA
2024-11-22 20:10:18.291 +02:00 [INF] Staff member with ID 5 connected and added to group. Connection ID: -s63AFYQeiCDILcm-dMQNA
2024-11-22 20:10:20.978 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/api/get-available-queries - null null
2024-11-22 20:10:20.988 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/api/get-available-queries - 404 0 null 10.7046ms
2024-11-22 20:10:20.991 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7061/api/get-available-queries, Response status code: 404
2024-11-22 20:10:23.009 +02:00 [INF] Staff member with ID 5 is disconnecting. Connection ID: -s63AFYQeiCDILcm-dMQNA
2024-11-22 20:10:23.011 +02:00 [INF] Staff member with ID 5 removed from group and connection removed. Connection ID: -s63AFYQeiCDILcm-dMQNA
2024-11-22 20:10:23.013 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 20:10:23.014 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=5&id=67Mo4bvgkxyC2oBAb0e4BQ - 200 null null 4777.468ms
2024-11-22 20:10:23.963 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 20:10:23.971 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 20:10:23.972 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 20:10:23.982 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__firebaseUid_0='7IYQt6XtkobAlONS0ZKV1Bvnot72' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 20:10:23.996 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__staff_StaffID_0='5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 20:10:24.513 +02:00 [INF] Executed DbCommand (513ms) [Parameters=[@__staff_StaffID_0='5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 20:10:24.546 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 20:10:24.554 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__firebaseUid_0='7IYQt6XtkobAlONS0ZKV1Bvnot72' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 20:10:24.558 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_UserID_0='14'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 20:10:24.563 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='14'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 20:10:24.564 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 20:10:24.566 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 1.819ms.
2024-11-22 20:10:24.567 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 593.707ms
2024-11-22 20:10:24.568 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 20:10:24.568 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 605.322ms
2024-11-22 20:10:24.611 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 20:10:24.617 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 5.5718ms
2024-11-22 20:10:24.774 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=5&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 20:10:24.777 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 20:10:24.778 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 20:10:24.779 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=5&negotiateVersion=1 - 200 316 application/json 4.3603ms
2024-11-22 20:10:24.821 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=5&id=iQ2GgQjvMMaF6Zix7DXkdg - null null
2024-11-22 20:10:24.824 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 20:10:25.001 +02:00 [INF] Staff member with ID 5 is connecting. Connection ID: CdWZpaGF2cUcLHu_fMQReA
2024-11-22 20:10:25.001 +02:00 [INF] Staff member with ID 5 connected and added to group. Connection ID: CdWZpaGF2cUcLHu_fMQReA
2024-11-22 20:11:05.511 +02:00 [INF] User profile is available. Using 'C:\Users\trent\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-22 20:11:05.733 +02:00 [INF] Now listening on: https://localhost:7061
2024-11-22 20:11:05.734 +02:00 [INF] Now listening on: http://localhost:5042
2024-11-22 20:11:05.738 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-22 20:11:05.739 +02:00 [INF] Hosting environment: Development
2024-11-22 20:11:05.740 +02:00 [INF] Content root path: C:\Users\trent\source\repos\Apptivate_UQMS
2024-11-22 20:11:08.473 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 20:11:09.131 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 20:11:09.146 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 20:11:09.157 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 20:11:09.159 +02:00 [ERR] User not logged in.
2024-11-22 20:11:09.172 +02:00 [INF] Executing RedirectResult, redirecting to /Account/Login.
2024-11-22 20:11:09.176 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 26.691ms
2024-11-22 20:11:09.179 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 20:11:09.185 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 302 0 null 714.8907ms
2024-11-22 20:11:09.204 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Account/Login - null null
2024-11-22 20:11:09.218 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 20:11:09.222 +02:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login() on controller Apptivate_UQMS_WebApp.Controllers.AccountController (Apptivate_UQMS_WebApp).
2024-11-22 20:11:10.719 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-11-22 20:11:11.896 +02:00 [INF] Executed DbCommand (160ms) [Parameters=[@__firebaseUser_Uid_0='7IYQt6XtkobAlONS0ZKV1Bvnot72' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUser_Uid_0
2024-11-22 20:11:12.121 +02:00 [INF] Accessing expired session, Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa
2024-11-22 20:11:12.123 +02:00 [INF] Auto-login successful for user Khalil@gmail.com.
2024-11-22 20:11:12.128 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard.
2024-11-22 20:11:12.130 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp) in 2906.8662ms
2024-11-22 20:11:12.132 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.AccountController.Login (Apptivate_UQMS_WebApp)'
2024-11-22 20:11:12.138 +02:00 [INF] Session started; Key:98fe3cdb-77b3-bfc4-c6b8-277193dd97aa, Id:c10a37a5-0341-ccf5-a1a2-cabd7dca3483
2024-11-22 20:11:12.146 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Account/Login - 302 0 null 2941.7701ms
2024-11-22 20:11:12.160 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard - null null
2024-11-22 20:11:12.170 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 20:11:12.175 +02:00 [INF] Route matched with {action = "Index", controller = "Dashboard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 20:11:12.180 +02:00 [INF] Executing RedirectResult, redirecting to /Dashboard/StaffDashboard.
2024-11-22 20:11:12.184 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp) in 6.703ms
2024-11-22 20:11:12.186 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.Index (Apptivate_UQMS_WebApp)'
2024-11-22 20:11:12.186 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard - 302 0 null 26.6027ms
2024-11-22 20:11:12.190 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - null null
2024-11-22 20:11:12.199 +02:00 [INF] Executing endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 20:11:12.200 +02:00 [INF] Route matched with {action = "StaffDashboard", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StaffDashboard() on controller Apptivate_UQMS_WebApp.Controllers.DashboardController (Apptivate_UQMS_WebApp).
2024-11-22 20:11:12.325 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__firebaseUid_0='7IYQt6XtkobAlONS0ZKV1Bvnot72' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 20:11:12.461 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__staff_StaffID_0='5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[Status], COUNT(*) AS [Count]
FROM [Queries] AS [q]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q0]
    WHERE [q].[QueryID] = [q0].[QueryID] AND [q0].[StaffID] = @__staff_StaffID_0)
GROUP BY [q].[Status]
2024-11-22 20:11:12.555 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__staff_StaffID_0='5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [q].[AssignmentID], [q].[AssignedDate], [q].[AssignmentNumber], [q].[Priority], [q].[QueryID], [q].[ResolutionDate], [q].[StaffID], [q0].[QueryID], [q0].[CategoryID], [q0].[CourseID], [q0].[DepartmentID], [q0].[Description], [q0].[ModuleID], [q0].[QueryTypeID], [q0].[ResolvedDate], [q0].[Status], [q0].[StudentID], [q0].[SubmissionDate], [q0].[TicketNumber], [q0].[Year], [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [q1].[CategoryID], [q1].[CategoryName], [q1].[QueryTypeID], [q2].[QueryTypeID], [q2].[TypeName], [d].[DepartmentID], [d].[DepartmentName]
FROM [QueryAssignments] AS [q]
LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
LEFT JOIN [StudentDetails] AS [s] ON [q0].[StudentID] = [s].[StudentID]
LEFT JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [QueryCategories] AS [q1] ON [q0].[CategoryID] = [q1].[CategoryID]
LEFT JOIN [QueryTypes] AS [q2] ON [q1].[QueryTypeID] = [q2].[QueryTypeID]
LEFT JOIN [Departments] AS [d] ON [q0].[DepartmentID] = [d].[DepartmentID]
WHERE [q].[StaffID] = @__staff_StaffID_0
2024-11-22 20:11:12.801 +02:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname], [p].[PositionID], [p].[PositionName], [t].[AssignmentID], [t].[AssignedDate], [t].[AssignmentNumber], [t].[Priority], [t].[QueryID], [t].[ResolutionDate], [t].[StaffID], [t].[QueryID0], [t].[CategoryID], [t].[CourseID], [t].[DepartmentID], [t].[Description], [t].[ModuleID], [t].[QueryTypeID], [t].[ResolvedDate], [t].[Status], [t].[StudentID], [t].[SubmissionDate], [t].[TicketNumber], [t].[Year], [t].[CategoryID0], [t].[CategoryName], [t].[QueryTypeID0], [t].[QueryTypeID1], [t].[TypeName]
FROM [StaffDetails] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserID] = [u].[UserID]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
LEFT JOIN (
    SELECT [q1].[AssignmentID], [q1].[AssignedDate], [q1].[AssignmentNumber], [q1].[Priority], [q1].[QueryID], [q1].[ResolutionDate], [q1].[StaffID], [q2].[QueryID] AS [QueryID0], [q2].[CategoryID], [q2].[CourseID], [q2].[DepartmentID], [q2].[Description], [q2].[ModuleID], [q2].[QueryTypeID], [q2].[ResolvedDate], [q2].[Status], [q2].[StudentID], [q2].[SubmissionDate], [q2].[TicketNumber], [q2].[Year], [q3].[CategoryID] AS [CategoryID0], [q3].[CategoryName], [q3].[QueryTypeID] AS [QueryTypeID0], [q4].[QueryTypeID] AS [QueryTypeID1], [q4].[TypeName]
    FROM [QueryAssignments] AS [q1]
    LEFT JOIN [Queries] AS [q2] ON [q1].[QueryID] = [q2].[QueryID]
    LEFT JOIN [QueryCategories] AS [q3] ON [q2].[CategoryID] = [q3].[CategoryID]
    LEFT JOIN [QueryTypes] AS [q4] ON [q3].[QueryTypeID] = [q4].[QueryTypeID]
) AS [t] ON [s].[StaffID] = [t].[StaffID]
WHERE EXISTS (
    SELECT 1
    FROM [QueryAssignments] AS [q]
    LEFT JOIN [Queries] AS [q0] ON [q].[QueryID] = [q0].[QueryID]
    WHERE [s].[StaffID] = [q].[StaffID] AND [q0].[QueryID] IS NOT NULL)
ORDER BY [s].[StaffID], [u].[UserID], [p].[PositionID], [t].[AssignmentID], [t].[QueryID0], [t].[CategoryID0]
2024-11-22 20:11:12.854 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__firebaseUid_0='7IYQt6XtkobAlONS0ZKV1Bvnot72' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[ConnectionId], [u].[Email], [u].[FirebaseUID], [u].[IsOnline], [u].[LastSeen], [u].[Name], [u].[PasswordHash], [u].[PhoneNumber], [u].[RegistrationDate], [u].[Role], [u].[Surname]
FROM [Users] AS [u]
WHERE [u].[FirebaseUID] = @__firebaseUid_0
2024-11-22 20:11:12.871 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='14'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StudentID], [s].[Course], [s].[Department], [s].[UserID], [s].[Year], [s].[studentNumber]
FROM [StudentDetails] AS [s]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 20:11:12.886 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_UserID_0='14'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[StaffID], [s].[Department], [s].[PositionID], [s].[UserID], [s].[YearGroupTeaching], [p].[PositionID], [p].[PositionName]
FROM [StaffDetails] AS [s]
LEFT JOIN [Positions] AS [p] ON [s].[PositionID] = [p].[PositionID]
WHERE [s].[UserID] = @__user_UserID_0
2024-11-22 20:11:12.899 +02:00 [INF] Executing ViewResult, running view StaffDashboard.
2024-11-22 20:11:13.014 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=5&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 20:11:13.019 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 20:11:13.031 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 20:11:13.033 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=5&negotiateVersion=1 - 200 316 application/json 19.1129ms
2024-11-22 20:11:13.040 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=5&id=9ykA2NTAko3w412h_wznDw - null null
2024-11-22 20:11:13.044 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 20:11:13.050 +02:00 [INF] Executed ViewResult - view StaffDashboard executed in 158.1582ms.
2024-11-22 20:11:13.054 +02:00 [INF] Executed action Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp) in 851.9544ms
2024-11-22 20:11:13.055 +02:00 [INF] Executed endpoint 'Apptivate_UQMS_WebApp.Controllers.DashboardController.StaffDashboard (Apptivate_UQMS_WebApp)'
2024-11-22 20:11:13.060 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/Dashboard/StaffDashboard - 200 null text/html; charset=utf-8 869.4915ms
2024-11-22 20:11:13.099 +02:00 [INF] Executed endpoint '/notificationHub'
2024-11-22 20:11:13.100 +02:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=5&id=9ykA2NTAko3w412h_wznDw - 200 null null 59.5429ms
2024-11-22 20:11:13.214 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - null null
2024-11-22 20:11:13.217 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7061/_vs/browserLink - null null
2024-11-22 20:11:13.222 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 7.5651ms
2024-11-22 20:11:13.260 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7061/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.4002ms
2024-11-22 20:11:13.261 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=5&negotiateVersion=1 - text/plain;charset=UTF-8 0
2024-11-22 20:11:13.271 +02:00 [INF] Executing endpoint '/notificationHub/negotiate'
2024-11-22 20:11:13.273 +02:00 [INF] Executed endpoint '/notificationHub/negotiate'
2024-11-22 20:11:13.275 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7061/notificationHub/negotiate?staffId=5&negotiateVersion=1 - 200 316 application/json 13.7509ms
2024-11-22 20:11:13.356 +02:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7061/notificationHub?staffId=5&id=Pb7BapNQK8jfa1vZsKeeyQ - null null
2024-11-22 20:11:13.359 +02:00 [INF] Executing endpoint '/notificationHub'
2024-11-22 20:11:13.418 +02:00 [INF] Staff member with ID 5 is connecting. Connection ID: YC4JEkIzsFEgVT50wvnmyg
2024-11-22 20:11:13.420 +02:00 [INF] Staff member with ID 5 connected and added to group. Connection ID: YC4JEkIzsFEgVT50wvnmyg
